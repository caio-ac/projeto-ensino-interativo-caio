<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dinastia Zhou</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/css/style.css">
</head>

<body>
    <div class="container">

        <a href="./../../china.html" class="botao btn btn-primary">Voltar</a>

        <div style="width: 5px;"></div>

        <a href="./pagina_shang.html" class="botao btn btn-primary"><i class="fas fa-backward"></i></a>

        <div class="slidecontainer">
            <input type="range" min="0" max="100" value="0" class="slider" id="myRange" />
            <div id="markers"></div>
        </div>

        <a href="./pagina_qin.html" class="botao btn btn-primary"><i class="fas fa-forward"></i></a>

        <div style="width: 5px;"></div>

        <a href="./pagina_qing.html" class="botao btn btn-primary">Avançar</a>

    </div>

    <br /><br />

    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   version="1.1"
   id="svg1"
   width="718.66669"
   height="614.66669"
   viewBox="0 0 718.66669 614.66669"
   sodipodi:docname="DinastiaZhou.svg"
   inkscape:version="1.4.2 (f4327f4, 2025-05-13)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs1" />
  <sodipodi:namedview
     id="namedview1"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:zoom="0.92836522"
     inkscape:cx="304.29835"
     inkscape:cy="323.68727"
     inkscape:window-width="1920"
     inkscape:window-height="1009"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="g1" />
  <g
     inkscape:groupmode="layer"
     inkscape:label="Image"
     id="g1">
    <path
       style="fill:#ececec;fill-opacity:1;stroke:#000000;stroke-width:2.26821;stroke-opacity:1"
       d="m 496.83453,254.18681 -14.54475,13.42063 1.45449,20.87654 15.9992,8.94708 7.27237,10.43826 2.90896,16.403 1.45447,13.42062 11.63579,11.92945 5.8179,13.42063 4.36341,22.3677 2.90896,16.403 -11.6358,17.89417 -17.45369,2.98236 -21.8171,2.98237 -13.09027,10.43825 -14.54475,19.38536 -17.45367,11.92944 -14.54475,2.98236 -17.45368,-4.47353 -8.72685,-8.9471 -8.72684,-5.96472 -14.54474,4.47355 -13.09026,-7.45591 -4.36343,-7.4559 -8.72683,10.43826 -14.54475,5.96472 -15.99921,4.47355 -14.54475,-7.4559 -17.45368,-5.96473 -20.36263,2.98236 -11.63579,10.43827 -23.27159,2.98237 -24.72606,1.49118 -15.9992,1.49117 -5.8179,-11.92944 v -8.94708 l 8.72684,-13.42063 7.27236,-11.92945 7.27237,-16.403 4.36343,-23.85888 v -28.33244 -20.87653 l -5.8179,-28.33243 -1.45447,-7.4559 v -2.98237 l 8.72684,-5.96473 h 20.36263 l 11.6358,-13.42063 21.81711,-23.85888 14.54474,-22.36772 10.18132,-4.47355 21.8171,1.4912 26.18053,-2.98237 h 30.54396 l 11.63579,-11.92945 21.81711,-20.87653 13.09026,-29.82361 13.09026,-10.43827 23.27159,-16.40298 17.45369,-4.47355 5.8179,4.47355 17.45368,10.43826 2.90895,16.40299 -5.81789,10.43826 -14.54474,-2.98236 -8.72685,20.87653 -2.90894,16.40298 -27.63502,10.43827 2.90896,5.96473 h 18.90816 c 0,0 10.18132,4.47355 8.72684,10.43827 -1.45447,5.96472 15.99922,-7.45592 15.99922,-7.45592 l 23.27157,-1.49117 7.27238,7.4559 -8.72685,14.91182 z"
       id="path4"
       onmousemove="showTooltip(event, 'Dinastia Zhou (1046–256 a.C.)', 'https://upload.wikimedia.org/wikipedia/commons/9/97/King_Wen_of_Zhou.jpg', 'A mais longa dinastia da China, marcada pelo surgimento do Mandato do Céu e pelo florescimento do pensamento confucionista e taoista.', this, '#8b5e3c');"
       onmouseout="hideTooltip();" onmouseleave="originalColor(this);" onclick="openModal('china');"/>
  </g>
</svg>





    <div>
        <div class="map-overlay">
            <h5>Informações Sobre a Dinastia Zhou</h5>
            <p>Passe o mouse e clique na Dinastia Zhou para descobrir mais sobre sua situação histórica e eventos
                marcantes.
            </p>
            <button class="btn btn-primary" data-toggle="modal" data-target="#infoModal">Saiba Mais</button>
        </div>
    </div>

    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="infoModalLabel">
                        Aprofundando o conhecimento
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="d-flex flex-column align-items-center">
                        <div class="modal-category">
                            <div>
                                <h6 class="font-weight-bold text-danger">Feudalismo</h6>
                                <p class="mb-0">
                                    Escritores ocidentais frequentemente descrevem o período Zhou como feudal porque o
                                    sistema fengjian de Zhou convida à comparação com os sistemas políticos europeus da
                                    Idade Média.

                                    Havia muitas semelhanças entre os sistemas descentralizados. Quando a dinastia foi
                                    estabelecida,
                                    as terras conquistadas foram divididas em feudos hereditários, que eventualmente se
                                    tornaram poderosos por direito próprio. Em questões de herança, a dinastia Zhou
                                    reconhecia apenas a
                                    primogenitura patrilinear como legal. De acordo com Hsi-Sheng Tao, "o sistema
                                    Tsung-fa ou linha de
                                    descendência tem as seguintes características: descendência patrilinear, sucessão
                                    patrilinear,
                                    patriarcado, exogamia de irmãos e primogenitura".
                                </p>
                            </div>
                        </div>


                        <div class="modal-category">
                            <div>
                                <h6 class="font-weight-bold text-secondary">Agricultura</h6>
                                <p class="mb-0">
                                    A agricultura na dinastia Zhou era muito intensiva e, em muitos casos, dirigida pelo
                                    governo. Todas as
                                    terras agrícolas eram propriedade de nobres, que então davam suas terras aos seus
                                    servos , uma situação
                                    semelhante ao feudalismo europeu . Por exemplo, um pedaço de terra era dividido em
                                    nove quadrados no sistema
                                    de poço-campo , com os grãos do quadrado do meio levados pelo governo e os dos
                                    quadrados ao redor mantidos por
                                    fazendeiros individuais. Dessa forma, o governo conseguia armazenar o excedente de
                                    alimentos e distribuí-los em
                                    tempos de fome ou colheita ruim. Alguns setores importantes da manufatura durante
                                    esse período incluíam a
                                    fundição de bronze, que era essencial para a fabricação de armas e ferramentas
                                    agrícolas. Novamente, essas
                                    indústrias eram dominadas pela nobreza que dirigia a produção de tais materiais.
                                </p>
                            </div>
                        </div>

                        <div class="modal-category">
                            <div>
                                <h6 class="font-weight-bold text-danger">Curiosidades</h6>
                                <p class="mb-0">
                                    Os primeiros projetos de engenharia hidráulica da China foram iniciados durante a
                                    dinastia Zhou, em última análise,
                                    como um meio de auxiliar a irrigação agrícola. Sunshu Ao , o chanceler de Wei que
                                    serviu ao rei Zhuang de Chu , represou
                                    um rio para criar um enorme reservatório de irrigação na atual província de Anhui ,
                                    no norte . Por isso, Sunshu é creditado
                                    como o primeiro engenheiro hidráulico da China. O posterior estadista de Wei, Ximen
                                    Bao , que serviu ao marquês Wen de Wei
                                    (445–396 a.C.), foi o primeiro engenheiro hidráulico da China a criar um grande
                                    sistema de canais de irrigação.
                                    Como foco principal de seu grandioso projeto, seu trabalho no canal eventualmente
                                    desviou as águas de todo o rio Zhang para
                                    um ponto mais acima do rio Amarelo.
                                </p>
                            </div>
                        </div>

                        <div><a href="https://en.wikipedia.org/wiki/Zhou_dynasty">Dinastia Zhou - Wikipédia</a></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>



    <div id="tooltip"></div>

    <div class="modal fade" id="countryModal" tabindex="-1" role="dialog" aria-labelledby="modalTitle"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <img id="modalImage" src="" alt="Bandeira do País" class="modal-flag" />
                    <h5 class="modal-title" id="modalTitle">País</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- Descrição Principal -->
                    <div id="modalDescription">
                        <p></p>
                    </div>

                    <!-- Primeira Imagem com Legenda -->
                    <figure class="modal-figure">
                        <img id="image1" src="" alt="Imagem histórica 1" class="modal-image" />
                        <figcaption id="image1Caption" class="modal-caption">
                            Legenda da imagem 1
                        </figcaption>
                    </figure>

                    <!-- Segundo Texto Descritivo -->
                    <div id="modalDescription2">
                        <p id="historicalInfo"></p>
                    </div>

                    <!-- Fontes -->
                    <div id="modalSources" class="modal-sources"></div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">
                            Fechar
                        </button>
                    </div>
                </div>
            </div>


            <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

            <script>
                const countryData = {
                    china: {
                        title: "China",
                        imageURL: "https://upload.wikimedia.org/wikipedia/commons/f/fa/Flag_of_the_People%27s_Republic_of_China.svg",

                        description: "Foi uma das mais longas e influentes dinastias da história da China, sucedendo à Dinastia Shang. Fundada após a vitória do rei Wu sobre o último rei Shang, a Zhou estabeleceu um sistema político baseado no feudalismo, distribuindo terras a nobres que governavam em seu nome. Esse período é marcado por grandes avanços culturais, filosóficos e políticos que moldaram a civilização chinesa.",
                        image: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/King_Wu_of_Zhou.jpg/320px-King_Wu_of_Zhou.jpg",
                        imageCaption: "Representação artística do rei Wu, fundador da Dinastia Zhou",

                        description2: "Durante a Dinastia Zhou, especialmente no período conhecido como Zhou Ocidental, a China experimentou estabilidade e crescimento. No entanto, a partir do século V a.C., durante o Zhou Oriental, o poder central enfraqueceu, dando início ao período das Primaveras e Outonos e, posteriormente, ao período dos Estados Combatentes, caracterizados por conflitos entre vários estados rivais. Foi também nessa época que surgiram importantes escolas filosóficas, como o confucionismo, o taoismo e o legalismo, cujas ideias influenciam até hoje a cultura chinesa.",

                        sources: [
                            {
                                name: "King Wu of Zhou - Wikipedia",
                                url: "https://en.wikipedia.org/wiki/King_Wu_of_Zhou"
                            },
                            {
                                name: "Government, Administration, and Law of the Zhou Period",
                                url: "http://www.chinaknowledge.de/History/Zhou/zhou-admin.html"
                            },
                            {
                                name: "Zhou dynasty | History, Achievements e Art & Facts | Britannica",
                                url: "https://www.britannica.com/topic/Zhou-dynasty"
                            }
                        ]
                    }
                };

                var myModalEl = document.getElementById('countryModal')
                myModalEl.addEventListener('hidden.bs.modal', function (event) {
                    document.body.style.overflow = 'auto'; // garante rolagem ao fechar
                })


                function openModal(country) {
                    const data = countryData[country.toLowerCase()];

                    if (!data) {
                        console.error("Dados do país não encontrados.");
                        return;
                    }

                    const setTextContent = (id, content, fallback = "Informação Indisponível") => {
                        document.getElementById(id).textContent = content || fallback;
                    };

                    const setImageAttributes = (id, src, alt, fallbackAlt = "Imagem não disponível") => {
                        const img = document.getElementById(id);
                        img.src = src || "";
                        img.alt = alt || fallbackAlt;
                    };

                    // Título do modal
                    setTextContent("modalTitle", data.title);

                    // Imagem da bandeira do país
                    setImageAttributes("modalImage", data.imageURL, `Bandeira de ${data.title}`);

                    // Descrição principal
                    setTextContent("modalDescription", data.description, "Sem descrição disponível");

                    // Primeira imagem e legenda
                    setImageAttributes("image1", data.image, `Imagem de ${data.title}`);
                    setTextContent("image1Caption", data.imageCaption, "Legenda indisponível");

                    // Segunda descrição
                    setTextContent("modalDescription2", data.description2);

                    // Fontes de informação
                    const sourcesElement = document.getElementById("modalSources");
                    if (data.sources && data.sources.length > 0) {
                        sourcesElement.innerHTML = "Fontes: " + data.sources
                            .map((source, index, arr) =>
                                `<a href="${source.url}" target="_blank">${source.name}</a>${index < arr.length - 1 ? (index === arr.length - 2 ? ' e ' : ', ') : ''}`
                            ).join('');
                    } else {
                        sourcesElement.textContent = "Fontes: Nenhuma fonte disponível.";
                    }

                    // Exibe o modal
                    $("#countryModal").modal("show");
                }

                function showTooltip(evt, title, imageURL, description, area, color) {
                    let tooltip = document.getElementById("tooltip");
                    tooltip.innerHTML = ""; // Limpa o conteúdo anterior do tooltip

                    // Criar elementos para o título, imagem e descrição
                    let tooltipTitle = document.createElement("div");
                    tooltipTitle.textContent = title;
                    tooltipTitle.classList.add("tooltip-title"); // Aplica a classe ao título

                    let tooltipImg = document.createElement("img");
                    tooltipImg.src = imageURL;
                    tooltipImg.classList.add("tooltip-image"); // Adiciona a classe para centralizar a imagem

                    let tooltipDescription = document.createElement("div");
                    tooltipDescription.textContent = description;
                    tooltipDescription.classList.add("tooltip-text"); // Aplica a classe ao texto

                    // Adiciona os elementos ao tooltip
                    tooltip.appendChild(tooltipTitle);
                    tooltip.appendChild(tooltipImg);
                    tooltip.appendChild(tooltipDescription);

                    tooltip.style.display = "block"; // Exibe o tooltip

                    // Define a posição do tooltip
                    let tooltipWidth = tooltip.offsetWidth;
                    let tooltipHeight = tooltip.offsetHeight;

                    let left = evt.pageX + 10; // Posição horizontal
                    let top = evt.pageY + 10; // Posição vertical

                    // Ajusta a posição se o tooltip sair da tela
                    if (left + tooltipWidth > window.innerWidth) {
                        left = window.innerWidth - tooltipWidth - 10;
                    }
                    if (top + tooltipHeight > window.innerHeight) {
                        top = window.innerHeight - tooltipHeight - 10;
                    }

                    tooltip.style.left = left + "px";
                    tooltip.style.top = top + "px";

                    // Alterar cor do elemento ou dos elementos dentro do grupo
                    if (area.tagName === "g") {
                        changeGroupColor(area, color);
                    } else {
                        area.style.fill = color;
                    }
                }

                function hideTooltip() {
                    var tooltip = document.getElementById("tooltip");
                    tooltip.style.display = "none"; // Oculta o tooltip
                }

                function originalColor(area) {
                    // Restaurar a cor original para grupos e elementos
                    if (area.tagName === "g") {
                        resetGroupColor(area);
                    } else {
                        area.style.fill = "#ececec";
                    }
                }

                function changeGroupColor(group, color) {
                    // Itera sobre todos os filhos do grupo e altera a cor
                    const elements = group.querySelectorAll("*");
                    elements.forEach((element) => {
                        if (element.tagName === "path") {
                            element.style.fill = color;
                        }
                    });
                }

                function resetGroupColor(group) {
                    // Itera sobre todos os filhos do grupo e restaura a cor original
                    const elements = group.querySelectorAll("*");
                    elements.forEach((element) => {
                        if (element.tagName === "path") {
                            element.style.fill = "#ececec"; // Cor original
                        }
                    });
                }

                const events = [
                    { year: -2070, label: "Xia" },
                    { year: -1600, label: "Shang" },
                    { year: -1046, label: "Zhou" },
                    { year: -221, label: "Qin" },
                    { year: -206, label: "Han" },
                    { year: 581, label: "Sui" },
                    { year: 618, label: "Tang" },
                    { year: 960, label: "Song" },
                    { year: 1271, label: "Yuan" },
                    { year: 1368, label: "Ming" },
                    { year: 1644, label: "Qing" },
                ];

                // Ajuste visual: ano extra para ter um espaço no final da linha do tempo
                const extraYear = 1800;

                const minYear = events[0].year;
                const maxYear = extraYear;
                const totalDuration = maxYear - minYear;

                const markersContainer = document.getElementById("markers");
                const slider = document.getElementById("myRange");

                // Função para calcular a posição proporcional em %
                function getProportionalPosition(year) {
                    return ((year - minYear) / totalDuration) * 100;
                }

                // Cria marcadores automaticamente
                function createMarkers() {
                    markersContainer.innerHTML = "";
                    events.forEach((event, index) => {
                        const marker = document.createElement("span");
                        marker.className = "marker";
                        marker.setAttribute("data-year", event.year);

                        const position = getProportionalPosition(event.year);
                        marker.style.left = `${position}%`;

                        // vertical alternating: mantém seu comportamento atual
                        if (event.year == -1600 || event.year == 1644) {
                            marker.style.top = "-45px";
                        } else {
                            marker.style.top = index % 2 === 1 ? "-40px" : "20px";
                        }

                        marker.innerHTML = `
      <span class="marker-title">${event.year}</span>
      <span class="marker-subtitle">${event.label}</span>
    `;

                        markersContainer.appendChild(marker);
                    });
                }

                createMarkers();

                // Encontra índice do evento mais próximo com base em um valor percentual (0-100)
                function getClosestEventIndex(value) {
                    let closestIndex = 0;
                    let closestDifference = Infinity;
                    events.forEach((event, index) => {
                        const eventPosition = getProportionalPosition(event.year);
                        const difference = Math.abs(value - eventPosition);
                        if (difference < closestDifference) {
                            closestDifference = difference;
                            closestIndex = index;
                        }
                    });
                    return closestIndex;
                }

                // Atualiza gradiente do slider enquanto o usuário move (pula para o ponto mais próximo)
                slider.addEventListener("input", function () {
                    const value = parseFloat(this.value);
                    const selectedIndex = getClosestEventIndex(value);
                    const selectedEvent = events[selectedIndex];
                    const eventPosition = getProportionalPosition(selectedEvent.year);

                    // Força o slider a "engatar" no valor exato do evento encontrado
                    this.value = eventPosition;

                    // Atualiza o fundo até exatamente o marcador
                    this.style.background = `linear-gradient(to right, #39b54a ${eventPosition}%, #feae98 ${eventPosition}%)`;
                });

                // Ao soltar o slider, navega para a página do evento
                slider.addEventListener("change", function () {
                    const selectedIndex = getClosestEventIndex(parseFloat(this.value));
                    const selectedEvent = events[selectedIndex];
                    window.location.href = `pagina_${selectedEvent.label.toLowerCase()}.html`;
                });

                // Pega o ano correspondente à página atual (se houver)
                function getCurrentYearFromURL() {
                    const currentPage = window.location.href;
                    const dynastyMatch = currentPage.match(/pagina_(\w+)\.html/);
                    if (dynastyMatch && dynastyMatch[1]) {
                        const dynasty = dynastyMatch[1].toLowerCase();
                        const event = events.find(e => e.label.toLowerCase() === dynasty);
                        return event ? event.year : null;
                    }
                    return null;
                }

                // Define o valor inicial do slider baseado no ano atual
                function initializeSlider() {
                    const currentYear = getCurrentYearFromURL();
                    if (currentYear !== null) {
                        const initialPosition = getProportionalPosition(currentYear);
                        slider.value = initialPosition;

                        const backgroundValue = (initialPosition / 100) * 100;
                        slider.style.background = `linear-gradient(to right, yellow 0%, yellow ${backgroundValue}%, #feae98 ${backgroundValue}%, #feae98 100%)`;
                    }
                }

                // Chama a função para inicializar o slider quando a página for carregada
                window.addEventListener("load", initializeSlider);

            </script>
</body>

</html>