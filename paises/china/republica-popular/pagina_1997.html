<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hong Kong e Macau</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/css/style.css">
</head>

<body>


    <div class="container">

        <a href="./../../china.html" class="botao btn btn-primary">Voltar</a>

        <div style="width: 5px;"></div>

        <a href="./pagina_1976.html" class="botao btn btn-primary"><i class="fas fa-backward"></i></a>

        <div class="slidecontainer">
            <input type="range" min="0" max="100" value="0" class="slider" id="myRange" />
            <div id="markers"></div>
        </div>

        <a href="./pagina_2012.html" class="botao btn btn-primary"><i class="fas fa-forward"></i></a>
        <div style="width: 5px;"></div>

        <a href="./pagina_2012.html" class="botao btn btn-primary">Avançar</a>

    </div>

    <br /><br />

    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <!-- Created with Inkscape (http://www.inkscape.org/) -->

    <svg version="1.1" id="svg1" width="1024" height="766" viewBox="0 0 1024 766"
        sodipodi:docname="RPC(1997 - 1999).svg" inkscape:version="1.4.2 (f4327f4, 2025-05-13)" xml:space="preserve"
        xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
        xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg"
        xmlns:svg="http://www.w3.org/2000/svg">
        <defs id="defs1" />
        <sodipodi:namedview id="namedview1" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25"
            inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0"
            inkscape:deskcolor="#d1d1d1" inkscape:zoom="0.37247727" inkscape:cx="-358.41114" inkscape:cy="514.12534"
            inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8"
            inkscape:window-maximized="1" inkscape:current-layer="g1" />
        <g inkscape:groupmode="layer" inkscape:label="Image" id="g1"
            onmousemove="showTooltip(event,'Reintegração de Hong Kong e Macau (1997–1999)','https://upload.wikimedia.org/wikipedia/commons/d/d2/Hkhistory.jpg','Retorno de Hong Kong e Macau à soberania chinesa sob o princípio de “um país, dois sistemas”.',this,'goldenrod');"
            onmouseout="hideTooltip();" onmouseleave="originalColor(this);" onclick="openModal('china');">
            <path
                style="fill:#ececec;fill-opacity:1;stroke:#000000;stroke-width:0.496775;stroke-dasharray:none;stroke-opacity:1"
                d="M 259.96348,138.35633 H 221.415 l -4.81857,19.84541 -4.81857,8.50516 -30.51753,4.25261 h -12.84959 l 4.81864,26.93307 v 5.67012 l -11.24332,19.84543 -12.84952,12.75777 c 0,0 8.03095,-2.83507 -14.45571,5.67012 -22.48665,8.50517 -28.91141,0 -28.91141,0 v -5.67012 l -12.849454,12.75775 -17.66808,-1.41753 -19.27428,-5.6701 -8.03094,25.51553 c 0,0 14.4557,15.59282 14.4557,21.26294 0,5.67012 -8.03094,14.17529 -8.03094,14.17529 l -3.21238,9.9227 20.88046,9.92273 3.21238,15.59283 32.123794,2.83504 17.66802,1.41754 9.63713,19.84542 c 0,0 6.42476,11.34023 -4.81857,11.34023 -11.24332,0 -20.88046,0 -20.88046,0 l -4.81857,15.59283 1.60619,9.92271 -11.243334,1.41753 4.81864,22.68048 12.849454,15.59283 14.45571,14.17529 h 19.27427 l 9.63714,4.25259 62.64132,52.44861 41.76086,-1.41753 6.42476,17.01035 24.09284,-17.01035 27.30522,11.34024 85.12791,-26.93307 25.69903,18.42788 3.21238,1.41754 12.84952,22.68047 -6.42476,26.93307 -14.45571,21.26294 3.21238,11.34024 19.27428,-2.83507 9.63706,12.75777 -3.21238,7.08766 c 0,0 19.27428,-2.83507 11.24333,2.83504 -8.03095,5.67015 -8.03095,8.5052 -8.03095,8.5052 l 9.63714,12.75775 11.24333,7.08765 27.30515,4.25259 8.03095,1.41753 -1.60619,-28.35057 14.45571,-4.25261 16.06189,9.92271 30.51754,-11.34025 11.24332,-4.25258 17.66809,12.75778 c 0,0 1.60619,11.34022 8.03095,12.75775 6.42475,1.41754 51.39799,5.67012 51.39799,5.67012 l 11.24333,19.84543 17.66809,-2.83507 c 0,0 3.21237,-11.34024 16.06182,-15.59283 12.84952,-4.25258 35.33617,-22.68045 35.33617,-22.68045 l 1.60619,-12.7578 25.69903,11.34027 43.36705,-31.18568 20.8804,-22.68045 24.09284,-35.43826 6.42476,-24.098 17.66808,-22.68048 1.60619,-24.09801 -16.06189,-4.25259 -3.21238,-9.92271 v -18.42788 c 0,0 3.21238,-11.34024 -11.24326,-17.01036 -14.4557,-5.67012 -28.91148,-26.93307 -28.91148,-26.93307 l -9.63707,-17.01036 25.69904,-29.76813 20.88039,-9.9227 -6.42476,-8.50517 -28.91134,2.83505 -16.0619,11.34024 -9.63713,-14.17529 -17.66809,-1.41754 c 0,0 -8.03095,-8.50518 -1.60619,-14.17531 6.42476,-5.67009 38.54855,-34.02069 38.54855,-34.02069 l 17.66802,-17.01036 8.03094,15.59283 c 0,0 -1.60612,1.41753 -1.60612,9.9227 0,8.50519 6.42476,24.09801 9.63714,18.42789 3.21231,-5.67012 16.06183,-21.26294 16.06183,-21.26294 l 20.88046,-9.92273 24.09285,-29.76811 12.84948,-2.83507 12.84949,-1.41751 1.60619,-7.08766 14.45569,-14.17531 11.24332,-4.25258 h 12.84949 c 0,0 1.6062,-2.83505 1.6062,-9.92271 0,-7.08766 -8.03094,-32.60318 -8.03094,-32.60318 l 8.03094,-14.17532 9.63715,-1.41751 c 0,0 8.03088,-15.59284 9.63707,-21.26296 1.6062,-5.67013 9.6371,-53.866124 6.4248,-48.196015 -3.2124,5.670108 -28.91139,14.175334 -35.33616,15.592799 -6.42474,1.41759 -11.24332,0 -25.69901,0 -14.45569,0 -35.33609,-15.592799 -35.33609,-15.592799 L 883.1644,63.227261 876.73965,43.381818 c 0,0 -11.24333,-17.010326 -17.66809,-21.262907 C 852.6468,17.86633 823.73546,9.3611043 823.73546,9.3611043 L 786.7931,13.613686 c 0,0 -16.0619,-9.9226897 -16.0619,7.087635 0,17.010389 6.42483,11.34028 6.42483,28.350606 0,17.010388 -1.60626,26.933078 -6.42483,34.020714 -4.8185,7.087698 -17.66801,18.427919 -17.66801,18.427919 l -12.84952,-11.340221 -14.4557,19.845391 -1.60619,21.26294 h 24.09284 l 25.69903,-1.41753 9.63707,14.17531 -16.06183,11.34024 -19.27427,4.25259 -19.27428,31.18564 -19.27427,-9.92271 -11.24333,17.01037 -28.91134,-4.25259 -8.03095,18.42787 12.84952,18.4279 c 0,0 -4.81857,11.34026 -17.66809,11.34026 -12.84951,0 -48.18561,12.75775 -48.18561,12.75775 l -43.36705,8.50517 c 0,0 -4.81864,5.67012 -19.27428,1.41754 -14.4557,-4.25259 -36.94236,-9.92271 -51.398,-14.17529 -14.4557,-4.25261 -75.49084,-9.92273 -75.49084,-9.92273 l -14.4557,-31.18565 -41.76087,-17.01035 -24.09284,-7.08766 6.42476,-22.68048 -25.69896,-35.43826 -20.88046,-17.01033 -25.69904,11.34024 z"
                id="path6" />
            <path
                style="fill:#ececec;fill-opacity:1;stroke:#000000;stroke-width:2.5;stroke-dasharray:none;stroke-opacity:1"
                d="M 1260.5304,2103.4151 Z" id="path7" />
        </g>
    </svg>





    <div>
        <div class="map-overlay">
            <h5>Informações Sobre o Período</h5>
            <p>Passe o mouse e clique no mapa para descobrir mais sobre sua situação.
            </p>
        </div>
    </div>


    <div id="tooltip"></div>

    <div class="modal fade" id="countryModal" tabindex="-1" role="dialog" aria-labelledby="modalTitle"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <img id="modalImage" src="" alt="Bandeira do País" class="modal-flag" />
                    <h5 class="modal-title" id="modalTitle">País</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- Descrição Principal -->
                    <div id="modalDescription">
                        <p></p>
                    </div>

                    <!-- Primeira Imagem com Legenda -->
                    <figure class="modal-figure">
                        <img id="image1" src="" alt="Imagem histórica 1" class="modal-image" />
                        <figcaption id="image1Caption" class="modal-caption">
                            Legenda da imagem 1
                        </figcaption>
                    </figure>

                    <!-- Segundo Texto Descritivo -->
                    <div id="modalDescription2">
                        <p id="historicalInfo"></p>
                    </div>

                    <!-- Segunda Imagem com Legenda -->
                    <figure class="modal-figure">
                        <img id="image_dois" src="" alt="Imagem histórica 2" class="modal-image" />
                        <figcaption id="image_doisCaption" class="modal-caption">
                            Legenda da imagem 2
                        </figcaption>
                    </figure>

                    <!-- Terceiro Texto Descritivo -->
                    <div id="modalDescription3">
                        <p></p>
                    </div>

                    <!-- Terceira Imagem com Legenda -->
                    <figure class="modal-figure">
                        <img id="image3" src="" alt="Imagem histórica 3" class="modal-image" />
                        <figcaption id="image3Caption" class="modal-caption">
                            Legenda da imagem 3
                        </figcaption>
                    </figure>

                    <!-- Informações Adicionais -->
                    <div id="modalAdditionalInfo" class="additional-info-box">
                        <h6>Informações Adicionais</h6>
                        <p id="additionalInfo"></p>
                    </div>

                    <!-- Fontes -->
                    <div id="modalSources" class="modal-sources"></div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">
                            Fechar
                        </button>
                    </div>


                </div>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        const countryData = {
            china: {
                title: "China",
                imageURL: "https://upload.wikimedia.org/wikipedia/commons/f/fa/Flag_of_the_People%27s_Republic_of_China.svg",

                description: "A República Popular da China vivia um período de consolidação das reformas econômicas iniciadas por Deng Xiaoping, mesmo após sua morte em fevereiro de 1997. Sob a liderança de Jiang Zemin, o PCC aprofundava a transição para o chamado “socialismo com características chinesas”, combinando controle político centralizado com abertura econômica gradual. Nesse contexto, a economia chinesa crescia rapidamente, impulsionada pela industrialização, investimento estrangeiro direto e expansão do comércio exterior, enquanto o Estado mantinha domínio estratégico sobre setores-chave, como energia, telecomunicações e finanças.",
                image: "https://upload.wikimedia.org/wikipedia/en/a/a5/Handover_of_Hong_Kong.png",
                imageCaption: "As comitivas chinesa (à esquerda) e britânica (à direita) pouco antes do arriamento da bandeira do Reino Unido e do hasteamento da bandeira da República Popular da China .",

                description2: "Um marco decisivo desse período foi a devolução de Hong Kong pelo Reino Unido em 1997 e de Macau por Portugal em 1999, sob o princípio de “um país, dois sistemas”. Esses retornos fortaleceram a soberania chinesa e ampliaram sua integração aos fluxos financeiros globais, transformando Hong Kong em um centro essencial para investimentos internacionais. Ao mesmo tempo, o governo chinês enfrentava desafios sociais, como o aumento das desigualdades regionais, desemprego urbano decorrente da reforma de estatais e tensões trabalhistas.",
                image_dois: "https://upload.wikimedia.org/wikipedia/commons/d/d9/HK_71_Match_BHKG1.jpg",
                image_doisCaption: "Hong Kong, 1º de julho, marcha com bandeira britânica de Hong Kong",

                description3: "Jiang Zemin consolidava sua posição como principal líder do país, promovendo a estabilidade política após os traumas do período pós-Tiananmen (1989). Ele reforçou o papel do PCC como núcleo do poder, introduzindo posteriormente a teoria das “Três Representatividades”, que ampliava a base social do partido ao incluir empresários e técnicos qualificados. Esse período marcou a transformação da China em um ator econômico global emergente.",
                image3: "https://upload.wikimedia.org/wikipedia/commons/7/7f/Vladimir_Putin_with_Jiang_Zemin-9_%28cropped_portrait%29.png",
                image3Caption: "Jiang Zemin em 2002",

                additionalInfo: "No cenário internacional, a China buscava integração gradual às instituições globais, preparando sua entrada na Organização Mundial do Comércio (OMC), que ocorreria em 2001. Ao mesmo tempo, mantinha uma política externa pragmática, evitando confrontos diretos e priorizando crescimento econômico, estabilidade interna e reconhecimento como potência em ascensão.",

                sources: [
                    {
                        name: "Hong Kong - Return to Chinese rule | Britannica",
                        url: "https://www.britannica.com/place/Hong-Kong/Return-to-Chinese-rule"
                    },
                    {
                        name: "Handover of Hong Kong - Wikipedia",
                        url: "https://en.wikipedia.org/wiki/Handover_of_Hong_Kong"
                    },
                    {
                        name: "Handover of Macau - Wikipedia",
                        url: "https://en.wikipedia.org/wiki/Handover_of_Macau"
                    },


                ]
            }
        };

        var myModalEl = document.getElementById('countryModal')
        myModalEl.addEventListener('hidden.bs.modal', function (event) {
            document.body.style.overflow = 'auto'; // garante rolagem ao fechar
        })


        function openModal(country) {
            const data = countryData[country.toLowerCase()];

            if (!data) {
                console.error("Dados do país não encontrados.");
                return;
            }

            const setTextContent = (id, content, fallback = "Informação Indisponível") => {
                document.getElementById(id).textContent = content || fallback;
            };

            const setImageAttributes = (id, src, alt, fallbackAlt = "Imagem não disponível") => {
                const img = document.getElementById(id);
                img.src = src || "";
                img.alt = alt || fallbackAlt;
            };

            // Título do modal
            setTextContent("modalTitle", data.title);

            // Imagem da bandeira do país
            setImageAttributes("modalImage", data.imageURL, `Bandeira de ${data.title}`);

            // Descrição principal
            setTextContent("modalDescription", data.description, "Sem descrição disponível");

            // Primeira imagem e legenda
            setImageAttributes("image1", data.image, `Imagem de ${data.title}`);
            setTextContent("image1Caption", data.imageCaption, "Legenda indisponível");

            // Segunda descrição
            setTextContent("modalDescription2", data.description2);

            // Segunda imagem e legenda
            setImageAttributes("image_dois", data.image_dois, "Imagem histórica 2");
            setTextContent("image_doisCaption", data.image_doisCaption, "Legenda indisponível");

            // Terceira descrição
            setTextContent("modalDescription3", data.description3);

            setImageAttributes("image3", data.image3, "Imagem histórica 3");
            setTextContent("image3Caption", data.image3Caption, "Legenda indisponível");

            // Informações adicionais
            setTextContent("additionalInfo", data.additionalInfo, "Nenhuma informação adicional disponível");

            // Fontes de informação
            const sourcesElement = document.getElementById("modalSources");
            if (data.sources && data.sources.length > 0) {
                sourcesElement.innerHTML = "Fontes: " + data.sources
                    .map((source, index, arr) =>
                        `<a href="${source.url}" target="_blank">${source.name}</a>${index < arr.length - 1 ? (index === arr.length - 2 ? ' e ' : ', ') : ''}`
                    ).join('');
            } else {
                sourcesElement.textContent = "Fontes: Nenhuma fonte disponível.";
            }

            // Exibe o modal
            $("#countryModal").modal("show");
        }

        function showTooltip(evt, title, imageURL, description, area, color) {
            let tooltip = document.getElementById("tooltip");
            tooltip.innerHTML = ""; // Limpa o conteúdo anterior do tooltip

            // Criar elementos para o título, imagem e descrição
            let tooltipTitle = document.createElement("div");
            tooltipTitle.textContent = title;
            tooltipTitle.classList.add("tooltip-title"); // Aplica a classe ao título

            let tooltipImg = document.createElement("img");
            tooltipImg.src = imageURL;
            tooltipImg.classList.add("tooltip-image"); // Adiciona a classe para centralizar a imagem

            let tooltipDescription = document.createElement("div");
            tooltipDescription.textContent = description;
            tooltipDescription.classList.add("tooltip-text"); // Aplica a classe ao texto

            // Adiciona os elementos ao tooltip
            tooltip.appendChild(tooltipTitle);
            tooltip.appendChild(tooltipImg);
            tooltip.appendChild(tooltipDescription);

            tooltip.style.display = "block"; // Exibe o tooltip

            // Define a posição do tooltip
            let tooltipWidth = tooltip.offsetWidth;
            let tooltipHeight = tooltip.offsetHeight;

            let left = evt.pageX + 10; // Posição horizontal
            let top = evt.pageY + 10; // Posição vertical

            // Ajusta a posição se o tooltip sair da tela
            if (left + tooltipWidth > window.innerWidth) {
                left = window.innerWidth - tooltipWidth - 10;
            }
            if (top + tooltipHeight > window.innerHeight) {
                top = window.innerHeight - tooltipHeight - 10;
            }

            tooltip.style.left = left + "px";
            tooltip.style.top = top + "px";

            // Alterar cor do elemento ou dos elementos dentro do grupo
            if (area.tagName === "g") {
                changeGroupColor(area, color);
            } else {
                area.style.fill = color;
            }
        }

        function hideTooltip() {
            var tooltip = document.getElementById("tooltip");
            tooltip.style.display = "none"; // Oculta o tooltip
        }

        function originalColor(area) {
            // Restaurar a cor original para grupos e elementos
            if (area.tagName === "g") {
                resetGroupColor(area);
            } else {
                area.style.fill = "#ececec";
            }
        }

        function changeGroupColor(group, color) {
            // Itera sobre todos os filhos do grupo e altera a cor
            const elements = group.querySelectorAll("*");
            elements.forEach((element) => {
                if (element.tagName === "path") {
                    element.style.fill = color;
                }
            });
        }

        function resetGroupColor(group) {
            // Itera sobre todos os filhos do grupo e restaura a cor original
            const elements = group.querySelectorAll("*");
            elements.forEach((element) => {
                if (element.tagName === "path") {
                    element.style.fill = "#ececec"; // Cor original
                }
            });
        }

        const events = [
            { year: 1949, label: "Fundação da República Popular da China", url: "pagina_1949.html" },
            { year: 1958, label: "Grande Salto Adiante", url: "pagina_1958.html" },
            { year: 1966, label: "Revolução Cultural", url: "pagina_1966.html" },
            { year: 1976, label: "Fim da Era Mao Tsé-Tung", url: "pagina_1976.html" },
            { year: 1997, label: "Hong Kong e Macau", url: "pagina_1997.html" },
            { year: 2012, label: "Ascensão de Xi Jinping", url: "pagina_2012.html" },
        ];


        const minYear = events[0].year;
        const maxYear = events[events.length - 1].year;
        const totalDuration = maxYear - minYear;

        const markersContainer = document.getElementById("markers");
        const slider = document.getElementById("myRange");


        function getProportionalPosition(year) {
            return ((year - minYear) / totalDuration) * 100;
        }


        function createMarkers() {
            markersContainer.innerHTML = "";

            events.forEach((event, index) => {
                const marker = document.createElement("span");
                marker.className = "marker";
                marker.setAttribute("data-year", event.year);

                let position = getProportionalPosition(event.year);


                if (event.year === 1949) position += 0.6;
                if (event.year === 1997) position -= 0.6;
                if (event.year === 2012) position -= 5;

                marker.style.left = `${position}%`;
                marker.style.top = index % 2 === 1 ? "-70px" : "20px";

                marker.innerHTML = `
      <span class="marker-title">${event.year}</span>
      <span class="marker-subtitle">${event.label}</span>
    `;

                markersContainer.appendChild(marker);
            });
        }

        createMarkers();

        // encontra evento mais próximo
        function getClosestEventIndex(value) {
            let closestIndex = 0;
            let closestDifference = Infinity;

            events.forEach((event, index) => {
                const eventPosition = getProportionalPosition(event.year);
                const difference = Math.abs(value - eventPosition);
                if (difference < closestDifference) {
                    closestDifference = difference;
                    closestIndex = index;
                }
            });

            return closestIndex;
        }

        // movimento do slider (salta para o evento)
        slider.addEventListener("input", function () {
            const value = parseFloat(this.value);
            const index = getClosestEventIndex(value);
            const eventPosition = getProportionalPosition(events[index].year);

            // força o slider a alinhar exatamente com o marcador
            this.value = eventPosition;

            // atualiza o visual do slider
            this.style.background = `
    linear-gradient(
      to right,
      yellow 0%,
      yellow ${eventPosition}%,
      #feae98 ${eventPosition}%,
      #feae98 100%
    )
  `;
        });

        // navegação
        slider.addEventListener("change", function () {
            const index = getClosestEventIndex(parseFloat(this.value));
            window.location.href = events[index].url;
        });

        // ano atual pela URL
        function getCurrentYearFromURL() {
            const match = window.location.href.match(/pagina_(\d+)\.html/);
            return match ? parseInt(match[1], 10) : null;
        }

        // inicializa slider
        function initializeSlider() {
            const currentYear = getCurrentYearFromURL();
            if (currentYear !== null) {
                const position = getProportionalPosition(currentYear);
                slider.value = position;
                slider.style.background = `linear-gradient(
      to right,
      yellow 0%,
      yellow ${position}%,
      #feae98 ${position}%,
      #feae98 100%
    )`;
            }
        }

        window.addEventListener("load", initializeSlider);



    </script>
</body>

</html>