<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fim da Era Mao</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/css/style.css">
</head>

<body>


    <div class="container">

        <a href="./../../china.html" class="botao btn btn-primary">Voltar</a>

        <div style="width: 5px;"></div>

        <a href="./pagina_1966.html" class="botao btn btn-primary"><i class="fas fa-backward"></i></a>

        <div class="slidecontainer">
            <input type="range" min="0" max="100" value="0" class="slider" id="myRange" />
            <div id="markers"></div>
        </div>

        <a href="./pagina_1997.html" class="botao btn btn-primary"><i class="fas fa-forward"></i></a>
        <div style="width: 5px;"></div>

        <a href="./pagina_2012.html" class="botao btn btn-primary">Avançar</a>

    </div>

    <br /><br />

    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <!-- Created with Inkscape (http://www.inkscape.org/) -->

    <svg version="1.1" id="svg1" width="1024" height="766" viewBox="0 0 1024 766" sodipodi:docname="RPC(1978).svg"
        inkscape:version="1.4.2 (f4327f4, 2025-05-13)" xml:space="preserve"
        xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
        xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg"
        xmlns:svg="http://www.w3.org/2000/svg">
        <defs id="defs1" />
        <sodipodi:namedview id="namedview1" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25"
            inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0"
            inkscape:deskcolor="#d1d1d1" inkscape:zoom="0.74495453" inkscape:cx="469.15615" inkscape:cy="400.69559"
            inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8"
            inkscape:window-maximized="1" inkscape:current-layer="g1" />
        <g inkscape:groupmode="layer" inkscape:label="Image" id="g1"
            onmousemove="showTooltip(event,'Morte de Mao Tsé-Tung e Transição Política (1976)','https://upload.wikimedia.org/wikipedia/commons/d/d9/CommunistSplit.png','Ano da morte de Mao Tsé-Tung, encerrando a era maoísta e abrindo caminho para reformas políticas e econômicas.',this,'goldenrod');"
            onmouseout="hideTooltip();" onmouseleave="originalColor(this);" onclick="openModal('china');">
            <path
                style="fill:#ececec;fill-opacity:1;stroke:#000000;stroke-width:2.5;stroke-dasharray:none;stroke-opacity:1"
                d="M 1260.5304,2103.4151 Z" id="path7" />
            <path
                style="fill:#ececec;fill-opacity:1;stroke:#000000;stroke-width:2.5;stroke-dasharray:none;stroke-opacity:1"
                d="m 315.45549,185.2462 -22.82018,12.08128 h -5.36946 l -1.34236,20.13546 -9.39655,4.02709 -10.73891,-4.02709 -18.79309,-4.0271 c 0,0 -5.36946,10.73891 -6.71182,20.13546 -1.34236,9.39655 1.34236,16.10837 1.34236,16.10837 l -18.79309,-2.68473 -21.47782,-1.34236 1.34236,8.05418 5.36946,16.10836 v 9.39655 l -13.42364,10.73891 -25.50491,14.766 H 155.7142 l -8.05418,-1.34236 -13.42364,14.766 c 0,0 0,-5.36945 -5.36945,-8.05418 -5.36946,-2.68473 -8.05419,-9.39655 -8.05419,-9.39655 l -28.189638,14.766 4.027092,14.76601 4.027096,8.05418 6.71181,16.10836 c 0,0 2.68473,6.71182 -4.02709,5.36946 -6.711816,-1.34236 -12.081271,2.68473 -12.081271,2.68473 l 20.135461,12.08127 16.10836,20.13546 13.42364,5.36945 5.36945,16.10837 8.05419,1.34236 -8.05419,5.36946 2.68473,10.73891 4.02709,9.39654 4.02709,8.05419 h -9.39654 l -14.766,-1.34237 4.02709,5.36946 1.34236,12.08127 6.71182,5.36946 9.39655,9.39655 16.10836,10.73891 18.7931,-5.36946 9.39654,10.73891 16.10837,17.45073 6.71182,1.34236 16.10836,16.10837 12.08128,10.73891 18.79309,-5.36946 13.42364,5.36946 26.84727,-4.02709 16.10837,-1.34237 12.08127,5.36946 32.21674,5.36946 16.10836,-13.42364 13.42364,-2.68473 12.08127,-8.05418 h 13.42364 l 13.42364,4.02709 -1.34236,10.73891 6.71181,1.34236 14.76601,-5.36945 21.47782,17.45073 v 22.82018 l -12.08128,16.10837 -9.39654,5.36945 1.34236,18.7931 9.39655,-1.34237 14.766,1.34237 1.34236,14.766 10.73891,-2.68473 -2.68472,18.79309 8.05418,2.68473 5.36945,6.71182 h 16.10837 l 1.34236,-9.39655 12.08128,17.45073 2.68472,-1.34236 -4.02709,-18.79309 4.02709,-6.71182 14.76601,-4.0271 18.79309,-2.68472 18.79309,-5.36946 10.73891,-4.02709 29.53201,-1.34236 -1.34237,14.766 18.7931,5.36945 22.82018,1.34237 20.13546,-1.34237 5.36945,12.08128 8.05419,6.71182 4.02709,-1.34237 -2.68473,-9.39654 v -6.71182 l 12.08127,-8.05419 26.84728,-13.42363 14.766,-8.05419 v -9.39654 l 6.71182,6.71182 17.45073,-8.05419 6.71182,-2.68472 5.36945,1.34236 14.76601,-9.39655 v -6.71182 l 4.02709,-2.68472 13.42364,-12.08128 1.34236,-9.39654 4.02709,-4.0271 8.05418,-5.36945 9.39655,-14.766 v -12.08128 l 4.02709,-6.71182 -8.05418,-6.71182 8.05418,-6.71181 v -12.08128 l 9.39655,-9.39654 -2.68473,-14.76601 1.34236,-10.73891 -16.10836,-8.05418 -5.36946,12.08127 5.36946,-17.45073 8.05418,-6.71181 -5.36945,-9.39655 -1.34237,-8.05418 -9.39654,-5.36946 -21.47782,-22.82018 -18.7931,-5.36946 -2.68473,-2.68473 -1.34236,-12.08127 16.10837,-14.766 1.34236,-14.766 21.47782,-6.71182 -13.42364,-9.39655 -14.766,6.71182 c 0,0 -4.02709,-5.36946 -8.05418,2.68473 -4.02709,8.05418 -16.10837,10.73891 -16.10837,10.73891 l -8.05418,-10.73891 -20.13546,1.34236 -5.36945,-14.766 c 0,0 -1.34237,1.34236 8.05418,-1.34237 9.39655,-2.68472 14.766,-14.766 14.766,-14.766 l 1.34237,-9.39654 10.73891,-9.39655 6.71182,-12.08127 18.79309,5.36945 -5.36946,14.766 2.68473,13.42364 8.05418,-8.05418 21.47783,-13.42364 12.08127,-16.10837 9.39655,-17.45073 6.71181,-13.42363 10.73892,5.36945 13.42363,-4.02709 -6.71182,-10.73891 c 0,0 4.0271,0 8.05419,-5.36946 4.02709,-5.36945 5.36945,-14.766 5.36945,-14.766 l 12.08128,-1.34236 5.36945,-10.73891 -10.73891,-22.82019 -4.02709,-8.05418 6.71182,-8.05418 16.10836,-1.34237 -1.34236,-14.766 -1.34236,-13.42363 -5.36946,-16.10837 6.71182,-2.68473 -6.71182,-1.34236 -4.02709,-9.396549 -16.10837,16.108369 -5.36945,9.39654 -14.766,2.68473 h -6.71182 l -1.34237,-10.73891 m 0,0 -28.18963,-6.71182 -16.10837,1.34237 -9.39655,-8.05419 -20.13545,-21.477818 -20.13546,-18.793093 -21.47782,9.396546 c 0,0 -10.73891,-2.684727 -16.10837,0 -5.36945,2.684728 -21.47782,13.423638 -21.47782,13.423638 l 8.05418,21.477817 -6.71181,22.82019 -2.68473,13.42364 -10.73891,10.73891 -17.45073,-9.39655 v 30.87437 l 4.02709,8.05418 16.10836,-4.02709 v 0 l 18.7931,-5.36946 14.766,10.73891 -2.68473,12.08128 -18.79309,-1.34236 c 0,0 -2.68473,10.73891 -8.05418,10.73891 -5.36946,0 -8.05419,0 -8.05419,0 l -4.02709,16.10836 c 0,0 -13.42364,-10.73891 -13.42364,-5.36945 0,5.36945 -1.34236,14.766 -1.34236,14.766 0,0 -9.39655,17.45073 -18.79309,12.08127 -9.39655,-5.36945 -12.08128,-8.05418 -12.08128,-8.05418 l -9.39654,10.73891 9.39654,9.39655 -5.36945,10.73891 -5.36946,1.34236 -12.08127,14.766 -21.47782,2.68473 -14.766,2.68473 -25.50492,16.10836 -10.73891,5.36946 -32.21673,-8.05418 -13.42364,-9.39655 c 0,0 -18.79309,5.36945 -29.532,5.36945 -10.73891,0 -49.66746,-4.02709 -49.66746,-4.02709 l -9.39655,-12.08127 -4.02709,-10.73891 -20.13546,-10.73891 -24.16254,-2.68473 h -17.45073 l -1.34237,-16.10837 2.68473,-17.45073 -4.02709,-10.73891 -14.766,-6.71181 -17.45073,-9.39655 -1.34237,-12.08128"
                id="path8" sodipodi:nodetypes="cccccccsccccccc" />
            <path
                style="fill:#ececec;fill-opacity:1;stroke:#000000;stroke-width:2.5;stroke-dasharray:none;stroke-opacity:1"
                d="M 153.02947,306.05895 Z" id="path9" />
            <path
                style="fill:#ececec;fill-opacity:1;stroke:#000000;stroke-width:2.5;stroke-dasharray:none;stroke-opacity:1"
                d="M 182.56148,292.63531 Z" id="path10" />
            <path
                style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:2.5;stroke-dasharray:none;stroke-opacity:1"
                d="M 728.90354,178.53439 Z" id="path11" />
        </g>
    </svg>




    <div>
        <div class="map-overlay">
            <h5>Informações Sobre o Período</h5>
            <p>Passe o mouse e clique no mapa para descobrir mais sobre sua situação.
            </p>
        </div>
    </div>


    <div id="tooltip"></div>

    <div class="modal fade" id="countryModal" tabindex="-1" role="dialog" aria-labelledby="modalTitle"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <img id="modalImage" src="" alt="Bandeira do País" class="modal-flag" />
                    <h5 class="modal-title" id="modalTitle">País</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- Descrição Principal -->
                    <div id="modalDescription">
                        <p></p>
                    </div>

                    <!-- Primeira Imagem com Legenda -->
                    <figure class="modal-figure">
                        <img id="image1" src="" alt="Imagem histórica 1" class="modal-image" />
                        <figcaption id="image1Caption" class="modal-caption">
                            Legenda da imagem 1
                        </figcaption>
                    </figure>

                    <!-- Segundo Texto Descritivo -->
                    <div id="modalDescription2">
                        <p id="historicalInfo"></p>
                    </div>

                    <!-- Segunda Imagem com Legenda -->
                    <figure class="modal-figure">
                        <img id="image_dois" src="" alt="Imagem histórica 2" class="modal-image" />
                        <figcaption id="image_doisCaption" class="modal-caption">
                            Legenda da imagem 2
                        </figcaption>
                    </figure>

                    <!-- Terceiro Texto Descritivo -->
                    <div id="modalDescription3">
                        <p></p>
                    </div>

                    <!-- Terceira Imagem com Legenda -->
                    <figure class="modal-figure">
                        <img id="image3" src="" alt="Imagem histórica 3" class="modal-image" />
                        <figcaption id="image3Caption" class="modal-caption">
                            Legenda da imagem 3
                        </figcaption>
                    </figure>

                    <!-- Informações Adicionais -->
                    <div id="modalAdditionalInfo" class="additional-info-box">
                        <h6>Informações Adicionais</h6>
                        <p id="additionalInfo"></p>
                    </div>

                    <!-- Fontes -->
                    <div id="modalSources" class="modal-sources"></div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">
                            Fechar
                        </button>
                    </div>


                </div>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        const countryData = {
            china: {
                title: "China",
                imageURL: "https://upload.wikimedia.org/wikipedia/commons/f/fa/Flag_of_the_People%27s_Republic_of_China.svg",

                description: "A República Popular da China atravessava um período de transição e instabilidade após décadas de políticas radicais sob Mao Tsé-Tung, incluindo o Grande Salto Adiante (1958-1962) e a Revolução Cultural (1966-1976). O PCC lidava com as sequelas de fome em massa, purgas políticas e divisões internas, enquanto buscava estabilizar o país após a morte de Zhou Enlai em janeiro e o devastador terremoto de Tangshan em julho, que ceifou centenas de milhares de vidas. A economia padecia de ineficiências coletivistas, mas reformas iniciais sob Deng Xiaoping (antes de sua purga) começavam a desafiar o modelo maoista, com incentivos agrícolas limitados e uma abertura gradual ao comércio exterior, embora o Estado preservasse o controle estrito sobre indústrias pesadas e planejamento centralizado.",
                image: "https://upload.wikimedia.org/wikipedia/commons/0/09/Kissinger_Mao.jpg",
                imageCaption: "Henry Kissinger (esquerda) junto a Mao Tsé-tung (direita) e Zhou Enlai (centro) em Pequim em julho de 1971.",

                description2: "A Revolução Cultural deixou marcas profundas, com tensões entre radicais (como a 'Banda dos Quatro') e moderados continuando, especialmente quanto à desestalinização parcial e à restauração de elites técnicas. Ao mesmo tempo, o país priorizava a reconstrução da infraestrutura industrial e de transportes, crucial para o crescimento, mas enfrentava obstáculos significativos devido ao isolamento econômico e à ênfase ideológica sobre a eficiência prática.",
                image_dois: "https://upload.wikimedia.org/wikipedia/commons/d/d9/Mao_Zedong_and_Lin_Biao_1967_People%27s_Pictorial_%28cropped%29.jpg",
                image_doisCaption: "Ilustração de Mao Tsé-tung e Lin Biao saudados pela multidão brandindo livros vermelhos.",

                description3: "A saúde de Mao Tsé-Tung estava seriamente comprometida. Aos 82 anos, ele lidava com doenças cardíacas, Parkinson e complicações respiratórias, tornando-se cada vez mais recluso em Zhongnanhai. Mao passou seus dias finais sob cuidados médicos intensos, enquanto o governo operava sob uma liderança coletiva fragmentada, com figuras como Hua Guofeng, Deng Xiaoping e a Banda dos Quatro competindo pelo poder. Sua morte em 9 de setembro de 1976 encerrou uma era, pavimentando o caminho para reformas futuras.",
                image3: "https://upload.wikimedia.org/wikipedia/commons/e/e4/%E6%AF%9B%E4%B8%BB%E5%B8%AD%E7%B4%80%E5%BF%B5%E5%A0%82_-_panoramio.jpg",
                image3Caption: "Mausoléu de Mao Tsé-Tung.",

                additionalInfo: "Internacionalmente, a China havia se aproximado dos Estados Unidos com a visita de Nixon em 1972 e o restabelecimento de relações diplomáticas, rompendo o isolamento soviético após o racha sino-soviético. O país apoiava movimentos de libertação no Terceiro Mundo, mas era visto com ambivalência pelas potências ocidentais, em meio à Guerra Fria e à emergência de Deng Xiaoping como reformador.",

                sources: [
                    {
                        name: "Mao Zedong | Biography & Facts | Britannica",
                        url: "https://www.britannica.com/biography/Mao-Zedong/Last-years-and-death."
                    },
                    {
                        name: "Era Mao Tsé-tung (1949–1976) — Wikipédia, a enciclopédia livre",
                        url: "https://pt.wikipedia.org/wiki/Era_Mao_Ts%C3%A9-tung_(1949%E2%80%931976)"
                    },
                    {
                        name: "China's new party chief Xi Jinping's speech",
                        url: "https://ensinarhistoria.com.br/grande-salto-adiante-programa-de-mao-tse-tung-china/"
                    },
                    {
                        name: "Timeline: U.S.-China Relations | Council on Foreign Relations",
                        url: "https://www.cfr.org/timeline/us-china-relations"
                    },


                ]
            }
        };

        var myModalEl = document.getElementById('countryModal')
        myModalEl.addEventListener('hidden.bs.modal', function (event) {
            document.body.style.overflow = 'auto'; // garante rolagem ao fechar
        })


        function openModal(country) {
            const data = countryData[country.toLowerCase()];

            if (!data) {
                console.error("Dados do país não encontrados.");
                return;
            }

            const setTextContent = (id, content, fallback = "Informação Indisponível") => {
                document.getElementById(id).textContent = content || fallback;
            };

            const setImageAttributes = (id, src, alt, fallbackAlt = "Imagem não disponível") => {
                const img = document.getElementById(id);
                img.src = src || "";
                img.alt = alt || fallbackAlt;
            };

            // Título do modal
            setTextContent("modalTitle", data.title);

            // Imagem da bandeira do país
            setImageAttributes("modalImage", data.imageURL, `Bandeira de ${data.title}`);

            // Descrição principal
            setTextContent("modalDescription", data.description, "Sem descrição disponível");

            // Primeira imagem e legenda
            setImageAttributes("image1", data.image, `Imagem de ${data.title}`);
            setTextContent("image1Caption", data.imageCaption, "Legenda indisponível");

            // Segunda descrição
            setTextContent("modalDescription2", data.description2);

            // Segunda imagem e legenda
            setImageAttributes("image_dois", data.image_dois, "Imagem histórica 2");
            setTextContent("image_doisCaption", data.image_doisCaption, "Legenda indisponível");

            // Terceira descrição
            setTextContent("modalDescription3", data.description3);

            setImageAttributes("image3", data.image3, "Imagem histórica 3");
            setTextContent("image3Caption", data.image3Caption, "Legenda indisponível");

            // Informações adicionais
            setTextContent("additionalInfo", data.additionalInfo, "Nenhuma informação adicional disponível");

            // Fontes de informação
            const sourcesElement = document.getElementById("modalSources");
            if (data.sources && data.sources.length > 0) {
                sourcesElement.innerHTML = "Fontes: " + data.sources
                    .map((source, index, arr) =>
                        `<a href="${source.url}" target="_blank">${source.name}</a>${index < arr.length - 1 ? (index === arr.length - 2 ? ' e ' : ', ') : ''}`
                    ).join('');
            } else {
                sourcesElement.textContent = "Fontes: Nenhuma fonte disponível.";
            }

            // Exibe o modal
            $("#countryModal").modal("show");
        }

        function showTooltip(evt, title, imageURL, description, area, color) {
            let tooltip = document.getElementById("tooltip");
            tooltip.innerHTML = ""; // Limpa o conteúdo anterior do tooltip

            // Criar elementos para o título, imagem e descrição
            let tooltipTitle = document.createElement("div");
            tooltipTitle.textContent = title;
            tooltipTitle.classList.add("tooltip-title"); // Aplica a classe ao título

            let tooltipImg = document.createElement("img");
            tooltipImg.src = imageURL;
            tooltipImg.classList.add("tooltip-image"); // Adiciona a classe para centralizar a imagem

            let tooltipDescription = document.createElement("div");
            tooltipDescription.textContent = description;
            tooltipDescription.classList.add("tooltip-text"); // Aplica a classe ao texto

            // Adiciona os elementos ao tooltip
            tooltip.appendChild(tooltipTitle);
            tooltip.appendChild(tooltipImg);
            tooltip.appendChild(tooltipDescription);

            tooltip.style.display = "block"; // Exibe o tooltip

            // Define a posição do tooltip
            let tooltipWidth = tooltip.offsetWidth;
            let tooltipHeight = tooltip.offsetHeight;

            let left = evt.pageX + 10; // Posição horizontal
            let top = evt.pageY + 10; // Posição vertical

            // Ajusta a posição se o tooltip sair da tela
            if (left + tooltipWidth > window.innerWidth) {
                left = window.innerWidth - tooltipWidth - 10;
            }
            if (top + tooltipHeight > window.innerHeight) {
                top = window.innerHeight - tooltipHeight - 10;
            }

            tooltip.style.left = left + "px";
            tooltip.style.top = top + "px";

            // Alterar cor do elemento ou dos elementos dentro do grupo
            if (area.tagName === "g") {
                changeGroupColor(area, color);
            } else {
                area.style.fill = color;
            }
        }

        function hideTooltip() {
            var tooltip = document.getElementById("tooltip");
            tooltip.style.display = "none"; // Oculta o tooltip
        }

        function originalColor(area) {
            // Restaurar a cor original para grupos e elementos
            if (area.tagName === "g") {
                resetGroupColor(area);
            } else {
                area.style.fill = "#ececec";
            }
        }

        function changeGroupColor(group, color) {
            // Itera sobre todos os filhos do grupo e altera a cor
            const elements = group.querySelectorAll("*");
            elements.forEach((element) => {
                if (element.tagName === "path") {
                    element.style.fill = color;
                }
            });
        }

        function resetGroupColor(group) {
            // Itera sobre todos os filhos do grupo e restaura a cor original
            const elements = group.querySelectorAll("*");
            elements.forEach((element) => {
                if (element.tagName === "path") {
                    element.style.fill = "#ececec"; // Cor original
                }
            });
        }

        const events = [
            { year: 1949, label: "Fundação da República Popular da China", url: "pagina_1949.html" },
            { year: 1958, label: "Grande Salto Adiante", url: "pagina_1958.html" },
            { year: 1966, label: "Revolução Cultural", url: "pagina_1966.html" },
            { year: 1976, label: "Fim da Era Mao Tsé-Tung", url: "pagina_1976.html" },
            { year: 1997, label: "Hong Kong e Macau", url: "pagina_1997.html" },
            { year: 2012, label: "Ascensão de Xi Jinping", url: "pagina_2012.html" },
        ];


        const minYear = events[0].year;
        const maxYear = events[events.length - 1].year;
        const totalDuration = maxYear - minYear;

        const markersContainer = document.getElementById("markers");
        const slider = document.getElementById("myRange");


        function getProportionalPosition(year) {
            return ((year - minYear) / totalDuration) * 100;
        }


        function createMarkers() {
            markersContainer.innerHTML = "";

            events.forEach((event, index) => {
                const marker = document.createElement("span");
                marker.className = "marker";
                marker.setAttribute("data-year", event.year);

                let position = getProportionalPosition(event.year);


                if (event.year === 1949) position += 0.6;
                if (event.year === 1997) position -= 0.6;
                if (event.year === 2012) position -= 5;

                marker.style.left = `${position}%`;
                marker.style.top = index % 2 === 1 ? "-70px" : "20px";

                marker.innerHTML = `
      <span class="marker-title">${event.year}</span>
      <span class="marker-subtitle">${event.label}</span>
    `;

                markersContainer.appendChild(marker);
            });
        }

        createMarkers();

        // encontra evento mais próximo
        function getClosestEventIndex(value) {
            let closestIndex = 0;
            let closestDifference = Infinity;

            events.forEach((event, index) => {
                const eventPosition = getProportionalPosition(event.year);
                const difference = Math.abs(value - eventPosition);
                if (difference < closestDifference) {
                    closestDifference = difference;
                    closestIndex = index;
                }
            });

            return closestIndex;
        }

        // movimento do slider (salta para o evento)
        slider.addEventListener("input", function () {
            const value = parseFloat(this.value);
            const index = getClosestEventIndex(value);
            const eventPosition = getProportionalPosition(events[index].year);

            // força o slider a alinhar exatamente com o marcador
            this.value = eventPosition;

            // atualiza o visual do slider
            this.style.background = `
    linear-gradient(
      to right,
      yellow 0%,
      yellow ${eventPosition}%,
      #feae98 ${eventPosition}%,
      #feae98 100%
    )
  `;
        });

        // navegação
        slider.addEventListener("change", function () {
            const index = getClosestEventIndex(parseFloat(this.value));
            window.location.href = events[index].url;
        });

        // ano atual pela URL
        function getCurrentYearFromURL() {
            const match = window.location.href.match(/pagina_(\d+)\.html/);
            return match ? parseInt(match[1], 10) : null;
        }

        // inicializa slider
        function initializeSlider() {
            const currentYear = getCurrentYearFromURL();
            if (currentYear !== null) {
                const position = getProportionalPosition(currentYear);
                slider.value = position;
                slider.style.background = `linear-gradient(
      to right,
      yellow 0%,
      yellow ${position}%,
      #feae98 ${position}%,
      #feae98 100%
    )`;
            }
        }

        window.addEventListener("load", initializeSlider);



    </script>
</body>

</html>