<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fundação da República Popular da China</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/css/style.css">
</head>

<body>


    <div class="container">

        <a href="./../../china.html" class="botao btn btn-primary">Voltar</a>

        <div style="width: 5px;"></div>

        <a href="./pagina_1945.html" class="botao btn btn-primary"><i class="fas fa-backward"></i></a>

        <div class="slidecontainer">
            <input type="range" min="0" max="100" value="0" class="slider" id="myRange" />
            <div id="markers"></div>
        </div>

        <a href="./../../china.html" class="botao btn btn-primary"><i class="fas fa-forward"></i></a>
        <div style="width: 5px;"></div>

        <a href="./../../china.html" class="botao btn btn-primary">Avançar</a>

    </div>

    <br /><br />

    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <!-- Created with Inkscape (http://www.inkscape.org/) -->

    <svg version="1.1" id="svg1" width="1024" height="766" viewBox="0 0 1024 766" sodipodi:docname="RPC(1949).svg"
        inkscape:version="1.4.2 (f4327f4, 2025-05-13)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
        xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg"
        xmlns:svg="http://www.w3.org/2000/svg">
        <defs id="defs1" />
        <sodipodi:namedview id="namedview1" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25"
            inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0"
            inkscape:deskcolor="#d1d1d1" inkscape:zoom="1.0535248" inkscape:cx="512.09046" inkscape:cy="383"
            inkscape:window-width="1920" inkscape:window-height="1009" inkscape:window-x="-8" inkscape:window-y="-8"
            inkscape:window-maximized="1" inkscape:current-layer="g1" />
        <g inkscape:groupmode="layer" inkscape:label="Image" id="g1" onmousemove="showTooltip(event,'Fundação da República Popular da China (1949)','https://upload.wikimedia.org/wikipedia/commons/a/ab/National_Emblem_of_the_People%27s_Republic_of_China_%282%29.svg','Mao Tsé-Tung proclamou a República Popular da China em Pequim.',this,'goldenrod');" onmouseout="hideTooltip();" onmouseleave="originalColor(this);" onclick="openModal('china');">
            <g id="g3">
                <path style="fill:#ececec;stroke:#000000;stroke-opacity:1"
                    d="m 682.47088,217.36555 -24.67906,2.84759 -6.64436,8.54275 -11.39033,5.69516 -6.64437,-1.89839 -6.64436,-3.79677 -7.59355,4.74597 V 243.943 l 6.64436,9.49194 v 0.9492 l -11.39034,8.54275 -18.98389,11.39033 c 0,0 -4.74597,0 -18.98389,1.89839 -14.23792,1.89839 -30.37423,8.54275 -30.37423,8.54275 0,0 -10.44114,6.64437 -14.23791,3.79678 -3.79678,-2.84758 -25.62826,-13.28872 -25.62826,-13.28872 l -15.18711,-8.54275 -17.0855,-2.84759 -14.23792,4.74598 -22.78067,-7.59356 -8.54275,-3.79678 -2.84758,-14.23792 -2.84759,-9.49194 -0.94919,-5.69517 -5.69517,-0.94919 -8.54275,-9.49195 -18.98389,-4.74597 -18.0347,-9.49195 7.59356,-14.23792 -4.74597,-18.98389 -4.74598,-16.1363 -10.44114,-5.69517 -12.33952,-6.64436 -0.9492,-9.49195 -6.64436,-6.64436 -5.69517,9.49195 -1.89839,6.64436 -8.54275,-0.9492 -4.74597,6.64436 -0.9492,7.59356 1.89839,4.74597 -11.39033,0.9492 -13.28872,-4.74597 -5.69517,-8.54276 -5.69517,11.39034 -7.59356,12.33953 -3.79677,2.84758 3.79677,8.54275 -2.84758,1.89839 -6.64436,-1.89839 -0.9492,-4.74597 H 243.943 l -2.84758,6.64436 2.84758,8.54275 v 5.69517 l 0.94919,8.54275 v 3.79678 l -3.79677,4.74597 -7.59356,5.69517 -10.44114,6.64436 -16.13631,6.64436 -25.62825,3.79678 -8.54275,0.9492 -9.49195,-4.74598 -9.49194,0.9492 -3.79678,4.74597 -9.49195,-0.94919 -5.69516,5.69516 h -4.74598 l -0.94919,9.49195 4.74597,8.54275 10.44114,5.69517 -2.84758,15.18711 -7.59356,3.79678 3.79678,8.54275 6.64436,6.64436 1.89839,8.54275 1.89839,7.59356 13.28872,3.79678 6.64436,14.23791 0.9492,11.39034 5.69517,6.64436 -3.79678,5.69517 -0.9492,10.44114 -1.89839,14.23792 -5.69516,-2.84759 -5.69517,0.9492 2.84758,22.78067 9.49195,8.54275 14.23792,21.83147 6.64436,-6.64436 6.64436,5.69517 19.93309,25.62825 4.74597,-1.89839 v 8.54275 l 13.28872,7.59356 6.64437,10.44114 13.28872,2.84758 9.49194,6.64436 h 15.18712 v 5.69517 l -0.9492,11.39034 10.44114,-3.79678 6.64436,-7.59356 9.49195,-3.79678 6.64436,6.64436 9.49195,1.89839 2.84758,3.79678 0.9492,11.39034 4.74597,7.59355 10.44114,0.9492 19.93308,2.84758 12.33953,-11.39033 17.0855,-6.64437 10.44114,1.89839 7.59356,7.59356 7.59356,-3.79678 5.69516,-4.74597 3.79678,12.33953 7.59356,4.74597 -4.74597,16.13631 -9.49195,16.13631 -7.59356,8.54275 -0.94919,11.39033 2.84758,8.54275 12.33953,-0.94919 1.89839,13.28872 9.49195,9.49195 -13.28873,6.64436 10.44114,10.44114 11.39034,4.74597 h 16.13631 v 10.44114 l 11.39033,-4.74597 -4.74597,-16.13631 6.64436,-0.94919 11.39033,1.89839 -3.79677,-9.49195 13.28872,2.84758 11.39033,0.9492 6.64437,-1.89839 10.44114,3.79678 5.69516,-8.54275 h 6.64436 l 13.28873,9.49194 c 0,0 4.74597,-4.74597 3.79678,1.89839 -0.9492,6.64436 8.54275,15.18711 8.54275,15.18711 l 18.03469,2.84759 9.49195,1.89839 7.59356,1.89839 1.89839,18.98389 h 10.44114 l 5.69516,-6.64436 -8.54275,-4.74598 3.79678,-7.59355 c 0,0 7.59356,0.94919 13.28872,0 5.69517,-0.9492 28.47584,-12.33953 28.47584,-12.33953 l 12.33953,-9.49195 2.84758,1.89839 23.72987,-6.64436 14.23791,-3.79678 8.54276,-14.23792 7.59355,-5.69516 6.64436,-5.69517 v -6.64436 l 3.79678,-6.64437 4.74597,1.89839 7.59356,-1.89839 0.9492,-11.39033 5.69516,-6.64436 v -9.49195 l 0.9492,-7.59355 7.59355,0.94919 2.84759,-7.59356 -1.89839,-7.59355 1.89839,-5.69517 1.89839,-6.64436 4.74597,5.69517 3.79678,-19.93309"
                    id="path2"
                    sodipodi:nodetypes="ccccccccccccscsccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccscccccccccsccccccccccccccccccccccc" />
                <path style="fill:#ececec;stroke:#000000;stroke-opacity:1"
                    d="m 771.69516,504.02231 3.79678,-12.33953 5.69517,-9.49195 L 766,479.34325 l -8.54276,0.94919 v -4.74597 L 766,468.90211 l 8.54275,-1.89839 -10.44114,-10.44114 -6.64437,-2.84758 4.74598,-1.89839 8.54275,1.89839 v -5.69517 l -8.54275,-6.64436 -7.59356,-7.59356 -6.64436,-14.23792 -5.69517,-8.54275 0.9492,-9.49194 -3.79678,-10.44114 3.79678,-13.28873 -0.9492,-3.79677 9.49195,-2.84759 4.74597,-8.54275 12.33953,-2.84758 2.84758,-8.54275 -18.98389,-1.89839 -11.39033,-1.89839 c 0,0 0.94919,10.44114 -6.64436,11.39033 -7.59356,0.9492 -11.39034,-0.94919 -11.39034,-0.94919 l -0.94919,-6.64436 -0.9492,-5.69517 -5.69517,-0.9492 10.44114,-1.89838 -9.49194,-10.44114 -6.64436,-4.74598 7.59355,-2.84758 9.49195,-18.98389 14.23792,-7.59356 10.44114,-3.79678 8.54275,6.64437 c 0,0 -8.54275,-0.9492 -9.49195,7.59355 -0.94919,8.54275 -3.79678,18.0347 -3.79678,18.0347 0,0 17.08551,0 17.08551,-3.79678 0,-3.79678 10.44114,-17.0855 10.44114,-17.0855 l 18.03469,-2.84759 5.69517,-11.39033 17.0855,-23.72986 c 0,0 -15.18711,7.59355 6.64436,5.69516 21.83148,-1.89839 7.59356,-5.69516 7.59356,-5.69516 l 5.69517,-10.44114 9.49194,-3.79678 2.84759,-10.44114 7.59355,-5.69517 c 0,0 0.9492,1.89839 4.74598,0.9492 3.79677,-0.9492 6.64436,-9.49195 6.64436,-9.49195 l -3.79678,-14.23792 -2.84758,-15.18711 4.74597,-5.69517 14.23792,1.89839 0.94919,-17.0855 3.79678,-25.62825 1.89839,-18.9839 -20.88228,16.13631 -18.0347,1.89839 -8.54275,-7.59356 -5.69517,-11.39033 -18.03469,-4.74597 -10.44114,-2.84759 -29.42503,-41.76456 -25.62826,-11.390335 h -28.47583 l -5.69517,9.491946 -6.64436,10.44114 7.59355,12.339529 -4.74597,11.39034 c 0,0 -1.89839,11.39033 -8.54275,19.93308 -6.64436,8.54275 -19.93308,8.54275 -19.93308,8.54275 l -11.39034,-1.89838 3.79678,11.39033 -5.69517,16.13631 12.33953,8.54275 19.93309,-4.74597 19.93308,15.18711 -8.54275,8.54275 -10.44114,-1.89839 -13.28872,1.89839 -7.59356,9.49195 -9.49194,9.49194"
                    id="path3"
                    sodipodi:nodetypes="cccccccccccccccccccccccccccsccccccccccccscsccccscccccscccccccccccccccccccccscccccccccccc" />
            </g>
        </g>
    </svg>




    <div>
        <div class="map-overlay">
            <h5>Informações Sobre o Período</h5>
            <p>Passe o mouse e clique no mapa para descobrir mais sobre sua situação.
            </p>
        </div>
    </div>


    <div id="tooltip"></div>

    <div class="modal fade" id="countryModal" tabindex="-1" role="dialog" aria-labelledby="modalTitle"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <img id="modalImage" src="" alt="Bandeira do País" class="modal-flag" />
                    <h5 class="modal-title" id="modalTitle">País</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <!-- Descrição Principal -->
                    <div id="modalDescription">
                        <p></p>
                    </div>

                    <!-- Primeira Imagem com Legenda -->
                    <figure class="modal-figure">
                        <img id="image1" src="" alt="Imagem histórica 1" class="modal-image" />
                        <figcaption id="image1Caption" class="modal-caption">
                            Legenda da imagem 1
                        </figcaption>
                    </figure>

                    <!-- Fontes -->
                    <div id="modalSources" class="modal-sources"></div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">
                            Fechar
                        </button>
                    </div>


                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="tutorialModal" tabindex="-1" role="dialog" aria-labelledby="tutorialTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tutorialTitle">
                        <i class="fas fa-map"></i> Tutorial do Mapa Interativo
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Passo 1 -->
                    <div class="tutorial-step" id="step-1">
                        <img src="../assets/gif/retroceder.gif" alt="GIF demonstrando o botão de retroceder"
                            class="tutorial-gif" />
                        <p class="tutorial-text">
                            <i class="fas fa-backward"></i> Use este botão para retroceder no
                            tempo e visualizar eventos anteriores.
                        </p>
                    </div>

                    <!-- Passo 2 -->
                    <div class="tutorial-step d-none" id="step-2">
                        <img src="../assets/gif/avancar.gif" alt="GIF demonstrando o botão de avançar"
                            class="tutorial-gif" />
                        <p class="tutorial-text">
                            <i class="fas fa-forward"></i> Este botão avança para eventos futuros na linha do tempo.
                        </p>
                    </div>

                    <!-- Passo 3 -->
                    <div class="tutorial-step d-none" id="step-3">
                        <img src="../assets/gif/arrastar.gif" alt="GIF demonstrando o slider" class="tutorial-gif" />
                        <p class="tutorial-text">
                            <i class="fas fa-sliders-h"></i> Arraste o slider para explorar os anos rapidamente e
                            interativamente.
                        </p>
                    </div>

                    <!-- Passo 4 -->
                    <div class="tutorial-step d-none" id="step-4">
                        <img src="../assets/gif/voltar.gif" alt="GIF demonstrando o botão Voltar"
                            class="tutorial-gif" />
                        <p class="tutorial-text">
                            <i class="fas fa-undo"></i> O botão "Voltar" permite retornar à página anterior.
                        </p>
                    </div>

                    <!-- Passo 5 -->
                    <div class="tutorial-step d-none" id="step-5">
                        <img src="../assets/gif/avancar1.gif" alt="GIF demonstrando o botão Avançar"
                            class="tutorial-gif" />
                        <p class="tutorial-text">
                            <i class="fas fa-check-circle"></i> O botão "Avançar" guia você para a próxima etapa.
                        </p>
                    </div>
                </div>

                <!-- Passo 6 -->
                <div class="tutorial-step d-none" id="step-6">
                    <img src="../assets/gif/tooltip.gif" alt="GIF mostrando como passar o mouse sobre um país"
                        class="tutorial-gif" />
                    <p class="tutorial-text">
                        <i class="fas fa-mouse-pointer"></i> Passe o mouse sobre um país para abrir uma pequena janela
                        com
                        informações básicas.
                    </p>
                </div>

                <!-- Passo 7 -->
                <div class="tutorial-step d-none" id="step-7">
                    <img style="max-width: 800px;" src="../assets/gif/modal.gif"
                        alt="GIF mostrando como clicar em um país" class="tutorial-gif" />
                    <p class="tutorial-text">
                        <i class="fas fa-hand-pointer"></i> Clique em um país para abrir uma tela com mais detalhes e
                        informações sobre ele.
                    </p>
                </div>


                <!-- Footer do modal -->
                <div class="modal-footer">
                    <!-- Checkbox "Não mostrar novamente" -->
                    <div class="form-check mt-3" id="dontShowAgainContainer">
                        <input class="form-check-input" type="checkbox" id="dontShowAgain" />
                        <label class="form-check-label" for="dontShowAgain">
                            Não mostrar novamente
                        </label>
                    </div>

                    <!-- Botões para navegação -->
                    <div class="ml-auto">
                        <button type="button" class="btn btn-secondary" id="prevStep">Anterior</button>
                        <button type="button" class="btn btn-primary" id="nextStep">Próximo</button>
                        <button type="button" class="btn btn-success d-none" id="finishTutorial"
                            data-dismiss="modal">Entendi!</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="settingsModalLabel">Configurações</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Gerencie suas preferências de tutorial:</p>
                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" id="tutorialCheckbox">
                        <label class="form-check-label" for="tutorialCheckbox">Ativar Tutorial</label>
                    </div>
                    <div>
                        <button id="openTutorial" data-dismiss="modal" class="btn btn-primary">Abrir Tutorial</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        const countryData = {
            china: {
                title: "China",
                imageURL: "https://upload.wikimedia.org/wikipedia/commons/f/fa/Flag_of_the_People%27s_Republic_of_China.svg",

                description: "Em 1º de outubro de 1949, Mao Tsé-Tung proclamou a fundação da República Popular da China na Praça da Paz Celestial, em Pequim. Após décadas de guerra civil, invasões estrangeiras e instabilidade, o Partido Comunista assumia o controle do país. O governo nacionalista de Chiang Kai-shek se refugiou em Taiwan, onde manteve o nome de República da China. A nova república socialista iniciou reformas profundas: redistribuição de terras, nacionalização da indústria e centralização do poder sob o Partido Comunista.",
                image: "https://upload.wikimedia.org/wikipedia/commons/8/85/Mao_Proclaiming_New_China.JPG",
                imageCaption: "Mao Tse Tung proclamando a fundação da República Popular da China em 1 de outubro de 1949",

                sources: [
                    {
                        name: "Revolução Chinesa (1911-1949): o que foi, suas causas e consequências - Toda Matéria",
                        url: "https://www.todamateria.com.br/revolucao-chinesa/"
                    },
                    {
                        name: "República Popular da China - Aventuras na História",
                        url: "https://aventurasnahistoria.com.br/noticias/reportagem/ha-75-anos-republica-popular-da-china-era-fundada.phtml"
                    },
                ]
            }
        };

        var myModalEl = document.getElementById('countryModal')
        myModalEl.addEventListener('hidden.bs.modal', function (event) {
            document.body.style.overflow = 'auto'; // garante rolagem ao fechar
        })


        function openModal(country) {
            const data = countryData[country.toLowerCase()];

            if (!data) {
                console.error("Dados do país não encontrados.");
                return;
            }

            const setTextContent = (id, content, fallback = "Informação Indisponível") => {
                document.getElementById(id).textContent = content || fallback;
            };

            const setImageAttributes = (id, src, alt, fallbackAlt = "Imagem não disponível") => {
                const img = document.getElementById(id);
                img.src = src || "";
                img.alt = alt || fallbackAlt;
            };

            // Título do modal
            setTextContent("modalTitle", data.title);

            // Imagem da bandeira do país
            setImageAttributes("modalImage", data.imageURL, `Bandeira de ${data.title}`);

            // Descrição principal
            setTextContent("modalDescription", data.description, "Sem descrição disponível");

            // Primeira imagem e legenda
            setImageAttributes("image1", data.image, `Imagem de ${data.title}`);
            setTextContent("image1Caption", data.imageCaption, "Legenda indisponível");

            // Fontes de informação
            const sourcesElement = document.getElementById("modalSources");
            if (data.sources && data.sources.length > 0) {
                sourcesElement.innerHTML = "Fontes: " + data.sources
                    .map((source, index, arr) =>
                        `<a href="${source.url}" target="_blank">${source.name}</a>${index < arr.length - 1 ? (index === arr.length - 2 ? ' e ' : ', ') : ''}`
                    ).join('');
            } else {
                sourcesElement.textContent = "Fontes: Nenhuma fonte disponível.";
            }

            // Exibe o modal
            $("#countryModal").modal("show");
        }

        function showTooltip(evt, title, imageURL, description, area, color) {
            let tooltip = document.getElementById("tooltip");
            tooltip.innerHTML = ""; // Limpa o conteúdo anterior do tooltip

            // Criar elementos para o título, imagem e descrição
            let tooltipTitle = document.createElement("div");
            tooltipTitle.textContent = title;
            tooltipTitle.classList.add("tooltip-title"); // Aplica a classe ao título

            let tooltipImg = document.createElement("img");
            tooltipImg.src = imageURL;
            tooltipImg.classList.add("tooltip-image"); // Adiciona a classe para centralizar a imagem

            let tooltipDescription = document.createElement("div");
            tooltipDescription.textContent = description;
            tooltipDescription.classList.add("tooltip-text"); // Aplica a classe ao texto

            // Adiciona os elementos ao tooltip
            tooltip.appendChild(tooltipTitle);
            tooltip.appendChild(tooltipImg);
            tooltip.appendChild(tooltipDescription);

            tooltip.style.display = "block"; // Exibe o tooltip

            // Define a posição do tooltip
            let tooltipWidth = tooltip.offsetWidth;
            let tooltipHeight = tooltip.offsetHeight;

            let left = evt.pageX + 10; // Posição horizontal
            let top = evt.pageY + 10; // Posição vertical

            // Ajusta a posição se o tooltip sair da tela
            if (left + tooltipWidth > window.innerWidth) {
                left = window.innerWidth - tooltipWidth - 10;
            }
            if (top + tooltipHeight > window.innerHeight) {
                top = window.innerHeight - tooltipHeight - 10;
            }

            tooltip.style.left = left + "px";
            tooltip.style.top = top + "px";

            // Alterar cor do elemento ou dos elementos dentro do grupo
            if (area.tagName === "g") {
                changeGroupColor(area, color);
            } else {
                area.style.fill = color;
            }
        }

        function hideTooltip() {
            var tooltip = document.getElementById("tooltip");
            tooltip.style.display = "none"; // Oculta o tooltip
        }

        function originalColor(area) {
            // Restaurar a cor original para grupos e elementos
            if (area.tagName === "g") {
                resetGroupColor(area);
            } else {
                area.style.fill = "#ececec";
            }
        }

        function changeGroupColor(group, color) {
            // Itera sobre todos os filhos do grupo e altera a cor
            const elements = group.querySelectorAll("*");
            elements.forEach((element) => {
                if (element.tagName === "path") {
                    element.style.fill = color;
                }
            });
        }

        function resetGroupColor(group) {
            // Itera sobre todos os filhos do grupo e restaura a cor original
            const elements = group.querySelectorAll("*");
            elements.forEach((element) => {
                if (element.tagName === "path") {
                    element.style.fill = "#ececec"; // Cor original
                }
            });
        }

        const events = [
            { year: 1912, label: "Proclamação da República da China", url: "pagina_1912.html" },
            { year: 1916, label: "Morte de Yuan Shikai e Era dos Senhores da Guerra", url: "pagina_1916.html" },
            { year: 1921, label: "Fundação do Partido Comunista da China", url: "pagina_1921.html" },
            { year: 1925, label: "Morte de Sun Yat-sen e ascensão de Chiang Kai-shek", url: "pagina_1925.html" },
            { year: 1926, label: "Expedição do Norte", url: "pagina_1926.html" },
            { year: 1931, label: "Invasão Japonesa da Manchúria", url: "pagina_1931.html" },
            { year: 1937, label: "Segunda Guerra Sino-Japonesa", url: "pagina_1937.html" },
            { year: 1945, label: "Fim da Segunda Guerra e retomada da Guerra Civil", url: "pagina_1945.html" },
            { year: 1949, label: "Fundação da República Popular da China", url: "pagina_1949.html" },
        ];


        const minYear = events[0].year;
        const maxYear = events[events.length - 1].year;
        const totalDuration = maxYear - minYear;

        const markersContainer = document.getElementById("markers");
        const slider = document.getElementById("myRange");


        function getProportionalPosition(year) {
            return ((year - minYear) / totalDuration) * 100;
        }


        function createMarkers() {
            markersContainer.innerHTML = "";

            events.forEach((event, index) => {
                const marker = document.createElement("span");
                marker.className = "marker";
                marker.setAttribute("data-year", event.year);

                let position = getProportionalPosition(event.year);


                if (event.year === 1912) position += 0.6;
                if (event.year === 1945) position -= 0.6;
                if (event.year === 1949) position -= 5;

                marker.style.left = `${position}%`;
                marker.style.top = index % 2 === 1 ? "-70px" : "20px";

                marker.innerHTML = `
      <span class="marker-title">${event.year}</span>
      <span class="marker-subtitle">${event.label}</span>
    `;

                markersContainer.appendChild(marker);
            });
        }

        createMarkers();

        // encontra evento mais próximo
        function getClosestEventIndex(value) {
            let closestIndex = 0;
            let closestDifference = Infinity;

            events.forEach((event, index) => {
                const eventPosition = getProportionalPosition(event.year);
                const difference = Math.abs(value - eventPosition);
                if (difference < closestDifference) {
                    closestDifference = difference;
                    closestIndex = index;
                }
            });

            return closestIndex;
        }

        // movimento do slider (salta para o evento)
        slider.addEventListener("input", function () {
            const value = parseFloat(this.value);
            const index = getClosestEventIndex(value);
            const eventPosition = getProportionalPosition(events[index].year);

            // força o slider a alinhar exatamente com o marcador
            this.value = eventPosition;

            // atualiza o visual do slider
            this.style.background = `
    linear-gradient(
      to right,
      yellow 0%,
      yellow ${eventPosition}%,
      #feae98 ${eventPosition}%,
      #feae98 100%
    )
  `;
        });

        // navegação
        slider.addEventListener("change", function () {
            const index = getClosestEventIndex(parseFloat(this.value));
            window.location.href = events[index].url;
        });

        // ano atual pela URL
        function getCurrentYearFromURL() {
            const match = window.location.href.match(/pagina_(\d+)\.html/);
            return match ? parseInt(match[1], 10) : null;
        }

        // inicializa slider
        function initializeSlider() {
            const currentYear = getCurrentYearFromURL();
            if (currentYear !== null) {
                const position = getProportionalPosition(currentYear);
                slider.value = position;
                slider.style.background = `linear-gradient(
      to right,
      yellow 0%,
      yellow ${position}%,
      #feae98 ${position}%,
      #feae98 100%
    )`;
            }
        }

        window.addEventListener("load", initializeSlider);


    </script>
</body>

</html>