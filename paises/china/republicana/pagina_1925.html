<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Morte de Sun Yat-sen e ascensão de Chiang Kai-shek</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../assets/css/style.css">
</head>

<body>

  <div class="container">

    <a href="./../../china.html" class="botao btn btn-primary">Voltar</a>

    <div style="width: 5px;"></div>

    <a href="./pagina_1921.html" class="botao btn btn-primary"><i class="fas fa-backward"></i></a>

    <div class="slidecontainer">
      <input type="range" min="0" max="100" value="0" class="slider" id="myRange" />
      <div id="markers"></div>
    </div>

    <a href="./pagina_1926.html" class="botao btn btn-primary"><i class="fas fa-forward"></i></a>
    <div style="width: 5px;"></div>

    <a href="./pagina_1949.html" class="botao btn btn-primary">Avançar</a>

  </div>

  <br /><br />

  <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <!-- Created with Inkscape (http://www.inkscape.org/) -->

    <svg version="1.1" id="svg1" width="1000" height="810" viewBox="0 0 1000 810"
        sodipodi:docname="ChinaRepublicana(1921).svg" inkscape:version="1.4.2 (f4327f4, 2025-05-13)"
        xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
        xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg"
        xmlns:svg="http://www.w3.org/2000/svg">
        <defs id="defs1" />
        <sodipodi:namedview id="namedview1" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25"
            inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0"
            inkscape:deskcolor="#d1d1d1" inkscape:zoom="0.70448787" inkscape:cx="432.93861" inkscape:cy="409.51734"
            inkscape:window-width="1366" inkscape:window-height="697" inkscape:window-x="-8" inkscape:window-y="-8"
            inkscape:window-maximized="1" inkscape:current-layer="g1" />
        <g inkscape:groupmode="layer" inkscape:label="Image" id="g1" style="display:inline" onmousemove="showTooltip(event,'Morte de Sun Yat-sen (1925)','https://upload.wikimedia.org/wikipedia/commons/a/a6/Sun_Yat-sen_and_Chiang_Kai-shek.jpg','Falecimento de Sun Yat-sen e consolidação da liderança de Chiang Kai-shek.',this,'goldenrod');" onmouseout="hideTooltip();" onmouseleave="originalColor(this);" onclick="openModal('china');"
>
            <g id="g2" transform="translate(-4.4237957e-8,-2.007435)" style="display:inline">
                <path style="fill:#ececec;stroke:#000000"
                    d="m 821.04089,293.0855 13.04833,5.01858 -9.03346,11.0409 -1.00372,11.04089 10.03718,1.00372 -9.03346,12.04461 22.08178,-23.08551 15.05577,-8.02974 35.13011,-49.18215 20.07435,4.01487 -3.01116,-14.05205 11.0409,-3.01115 12.04461,-15.05576 11.04089,-5.01859 8.02974,-17.0632 -7.02602,-31.11524 7.02602,-16.05948 19.07063,-2.00743 -3.01115,-62.23048 6.0223,-14.052045 c 0,0 -33.12267,18.066915 -33.12267,22.081785 0,4.01486 -17.0632,14.05204 -17.0632,14.05204 L 910.37174,96.356877 868.21561,84.312268 856.171,69.256506 843.12267,44.163569 829.07063,29.107807 803.97769,18.066915 l -30.11152,3.011152 -23.0855,13.048327 -5.01859,17.063197 10.03717,12.04461 c 0,0 -5.01858,17.063197 -6.0223,25.092937 -1.00372,8.029739 -16.05948,19.070622 -16.05948,19.070622 l -16.05948,7.02603 -40.1487,-7.02603 -31.11524,25.09294 -24.08922,5.01859 -34.12639,-9.03346 4.01487,-10.03717 -15.05577,2.00743 -12.04461,-7.02602 -21.07806,3.01115 -24.08922,-1.00372 c 0,0 -12.04461,-14.05204 -16.05948,-14.05204 -4.01487,0 -5.01859,-10.03717 -5.01859,-10.03717 l -29.10781,-7.026022 c 0,0 -8.02974,5.018587 -14.05204,-7.026023 -6.02231,-12.044609 -10.03717,-27.100371 -10.03717,-27.100371 l -26.09666,-6.022305 -34.12639,3.011152 2.00743,12.04461 -18.06691,2.007435 7.02602,6.022305 -5.01859,10.037174 -26.09665,-2.007435 -12.04461,-7.026022 -4.01487,-7.026022 -4.01487,2.007435 v 8.02974 c 0,0 2.00743,3.011152 -2.00744,3.011152 -4.01487,0 -10.03717,-2.007435 -10.03717,-2.007435 l 1.00372,6.022305 2.00743,10.037175 1.00372,11.040892 1.00372,7.02602 -9.03346,1.00371 2.00743,12.04461 -1.00371,1.00372 c 0,0 -23.08551,-3.01115 -25.09294,1.00372 -2.00744,4.01487 -11.04089,5.01859 -11.04089,5.01859 l -6.02231,10.03717 -19.07063,1.00372 v 12.04461 c 0,0 3.01115,10.03717 -2.00743,14.05204 -5.01859,4.01487 -22.08179,-4.01487 -22.08179,-4.01487 l -14.05204,-4.01487 -16.05948,26.09666 1.00371,12.04461 -19.07063,-2.00744 -21.07806,1.00372 4.01487,16.05948 c 0,0 2.00743,12.04461 2.00743,18.06691 0,6.02231 -10.03717,12.04461 -10.03717,12.04461 l -4.01487,7.02603 c 0,0 6.0223,12.04461 -3.01116,12.04461 -9.03345,0 -31.11524,2.00743 -31.11524,2.00743 l -12.04461,-2.00743 c 0,0 6.02231,0 -5.018582,6.0223 -11.040892,6.02231 -20.07435,5.01859 -20.07435,5.01859 0,0 -3.011152,3.01115 -8.029739,4.01487 -5.018588,1.00371 -16.05948,-2.00744 -16.05948,-2.00744 L 36.133829,270 c 0,0 0,6.0223 0,11.04089 0,5.01858 -21.078066,5.01858 -21.078066,5.01858 l 9.033457,9.03346 11.040892,13.04833 c 0,0 7.026022,9.03346 7.026022,13.04833 0,4.01487 2.007435,26.09665 2.007435,26.09665 l 6.022305,20.07435 14.052045,13.04833 15.055762,8.02974 2.007435,15.05576 16.059479,12.04461 13.048325,-11.04089 17.0632,-5.01859 12.04461,4.01487 14.05204,-4.01487 20.07435,7.02602 15.05576,7.02602 23.0855,-10.03717 33.12268,-3.01115 12.04461,2.00743 19.07063,1.00372 2.00744,4.01487 -3.01116,9.03346 8.02974,14.05204 -13.04832,5.01859 7.02602,14.05204 -8.02974,7.02602 13.04833,10.03718 -5.01859,6.0223 15.05576,7.02603 32.11896,1.00371 11.04089,5.01859 17.0632,10.03718 c 0,0 8.02974,-5.01859 11.04089,-1.00372 3.01115,4.01487 9.03346,17.0632 9.03346,17.0632 l 17.0632,6.0223 3.01115,2.00744 3.01115,-7.02603 10.03718,-2.00743 -3.01116,-12.04461 5.01859,-7.02602 7.02602,7.02602 12.04461,21.07807 c 0,0 7.02603,10.03717 7.02603,15.05576 0,5.01859 3.01115,32.11896 3.01115,32.11896 l 1.00372,14.05204 -9.03346,1.00372 v 8.02974 l -10.03718,4.01487 -2.00743,17.0632 10.03717,-5.01859 3.01116,32.11896 h -7.02603 l 6.02231,5.01858 -9.03346,6.02231 -16.05948,15.05576 1.00372,16.05948 3.01115,4.01487 16.05948,-1.00372 7.02602,-1.00371 -2.00743,18.06691 16.05948,6.02231 -9.03346,19.07063 h 17.0632 v 6.0223 l 18.06691,1.00372 2.00744,9.03346 15.05576,7.02602 v -12.04461 -21.07807 l 19.07063,7.02602 16.05948,-8.02973 8.02974,5.01858 c 0,0 8.02974,-15.05576 10.03717,-10.03717 2.00744,5.01859 11.0409,12.04461 11.0409,12.04461 l 9.03345,-12.04461 8.02974,-11.04089 19.07064,10.03717 12.04461,2.00744 -1.00372,15.05576 18.06691,8.02974 21.07807,-5.01859 9.03346,3.01115 8.02974,8.02974 c 0,0 7.02602,-13.04833 7.02602,-7.02602 0,6.0223 6.0223,22.08178 6.0223,22.08178 l 12.04461,-15.05576 c 0,0 26.09666,-3.01115 27.10038,-7.02602 1.00371,-4.01487 11.04089,-11.04089 16.05947,-16.05948 5.01859,-5.01859 16.05948,-19.07063 16.05948,-19.07063 l 17.0632,9.03346 17.0632,-16.05948 c 0,0 27.10037,11.04089 24.08922,-1.00372 -3.01115,-12.04461 -5.01859,-21.07807 -5.01859,-21.07807 l 24.08922,-11.04089 25.09294,-23.0855 c 0,0 0,-16.05948 2.00743,-21.07807 2.00744,-5.01859 17.0632,-31.11524 17.0632,-31.11524 l 5.01859,-41.15242 9.03345,-17.06319 -26.09665,-4.01487 3.01115,-11.0409 11.04089,-4.01487 8.02974,-5.01858 -10.03717,-8.02974 3.01115,-13.04833 -14.05204,-7.02602 -14.05205,-19.07064 -7.02602,-20.07434 -12.04461,-9.03346 -5.01859,-14.05205 17.0632,-21.07806 19.07063,-14.05205 8.02974,-14.05204 -19.07063,-1.00372 c 0,0 -23.0855,-3.01115 -30.11152,-2.00743 -7.02603,1.00371 5.01858,8.02973 5.01858,8.02973 l -7.02602,7.02603"
                    id="path1" />
            </g>
            <path style="display:inline;fill:#ececec;stroke:#000000"
                d="m 806.98885,348.28996 6.0223,-25.09293 3.01115,-21.07807 6.02231,-12.04461 -15.05576,78.28996"
                id="path2" />
        </g>
    </svg>


  <div>
    <div class="map-overlay">
      <h5>Informações Sobre o Período</h5>
      <p>Passe o mouse e clique no mapa para descobrir mais sobre sua situação.
      </p>
    </div>
  </div>


  <div id="tooltip"></div>

  <div class="modal fade" id="countryModal" tabindex="-1" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <img id="modalImage" src="" alt="Bandeira do País" class="modal-flag" />
          <h5 class="modal-title" id="modalTitle">País</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">
          <!-- Descrição Principal -->
          <div id="modalDescription">
            <p></p>
          </div>

          <!-- Primeira Imagem com Legenda -->
          <figure class="modal-figure">
            <img id="image1" src="" alt="Imagem histórica 1" class="modal-image" />
            <figcaption id="image1Caption" class="modal-caption">
              Legenda da imagem 1
            </figcaption>
          </figure>

          <!-- Fontes -->
          <div id="modalSources" class="modal-sources"></div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">
              Fechar
            </button>
          </div>


        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="tutorialModal" tabindex="-1" role="dialog" aria-labelledby="tutorialTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="tutorialTitle">
            <i class="fas fa-map"></i> Tutorial do Mapa Interativo
          </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- Passo 1 -->
          <div class="tutorial-step" id="step-1">
            <img src="../assets/gif/retroceder.gif" alt="GIF demonstrando o botão de retroceder" class="tutorial-gif" />
            <p class="tutorial-text">
              <i class="fas fa-backward"></i> Use este botão para retroceder no
              tempo e visualizar eventos anteriores.
            </p>
          </div>

          <!-- Passo 2 -->
          <div class="tutorial-step d-none" id="step-2">
            <img src="../assets/gif/avancar.gif" alt="GIF demonstrando o botão de avançar" class="tutorial-gif" />
            <p class="tutorial-text">
              <i class="fas fa-forward"></i> Este botão avança para eventos futuros na linha do tempo.
            </p>
          </div>

          <!-- Passo 3 -->
          <div class="tutorial-step d-none" id="step-3">
            <img src="../assets/gif/arrastar.gif" alt="GIF demonstrando o slider" class="tutorial-gif" />
            <p class="tutorial-text">
              <i class="fas fa-sliders-h"></i> Arraste o slider para explorar os anos rapidamente e
              interativamente.
            </p>
          </div>

          <!-- Passo 4 -->
          <div class="tutorial-step d-none" id="step-4">
            <img src="../assets/gif/voltar.gif" alt="GIF demonstrando o botão Voltar" class="tutorial-gif" />
            <p class="tutorial-text">
              <i class="fas fa-undo"></i> O botão "Voltar" permite retornar à página anterior.
            </p>
          </div>

          <!-- Passo 5 -->
          <div class="tutorial-step d-none" id="step-5">
            <img src="../assets/gif/avancar1.gif" alt="GIF demonstrando o botão Avançar" class="tutorial-gif" />
            <p class="tutorial-text">
              <i class="fas fa-check-circle"></i> O botão "Avançar" guia você para a próxima etapa.
            </p>
          </div>
        </div>

        <!-- Passo 6 -->
        <div class="tutorial-step d-none" id="step-6">
          <img src="../assets/gif/tooltip.gif" alt="GIF mostrando como passar o mouse sobre um país"
            class="tutorial-gif" />
          <p class="tutorial-text">
            <i class="fas fa-mouse-pointer"></i> Passe o mouse sobre um país para abrir uma pequena janela com
            informações básicas.
          </p>
        </div>

        <!-- Passo 7 -->
        <div class="tutorial-step d-none" id="step-7">
          <img style="max-width: 800px;" src="../assets/gif/modal.gif" alt="GIF mostrando como clicar em um país"
            class="tutorial-gif" />
          <p class="tutorial-text">
            <i class="fas fa-hand-pointer"></i> Clique em um país para abrir uma tela com mais detalhes e
            informações sobre ele.
          </p>
        </div>


        <!-- Footer do modal -->
        <div class="modal-footer">
          <!-- Checkbox "Não mostrar novamente" -->
          <div class="form-check mt-3" id="dontShowAgainContainer">
            <input class="form-check-input" type="checkbox" id="dontShowAgain" />
            <label class="form-check-label" for="dontShowAgain">
              Não mostrar novamente
            </label>
          </div>

          <!-- Botões para navegação -->
          <div class="ml-auto">
            <button type="button" class="btn btn-secondary" id="prevStep">Anterior</button>
            <button type="button" class="btn btn-primary" id="nextStep">Próximo</button>
            <button type="button" class="btn btn-success d-none" id="finishTutorial"
              data-dismiss="modal">Entendi!</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="settingsModalLabel">Configurações</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Gerencie suas preferências de tutorial:</p>
          <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" id="tutorialCheckbox">
            <label class="form-check-label" for="tutorialCheckbox">Ativar Tutorial</label>
          </div>
          <div>
            <button id="openTutorial" data-dismiss="modal" class="btn btn-primary">Abrir Tutorial</button>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
        </div>
      </div>
    </div>
  </div>


  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script>
    const countryData = {
      china: {
        title: "China",
        imageURL: "https://upload.wikimedia.org/wikipedia/commons/f/fa/Flag_of_the_People%27s_Republic_of_China.svg",

        description: "Sun Yat-sen faleceu em março de 1925, deixando um legado de luta pela modernização da China. Com sua morte, Chiang Kai-shek assumiu a liderança do Kuomintang (Partido Nacionalista) e iniciou uma nova fase marcada pela militarização e pela tentativa de reunificação nacional. Chiang buscava consolidar o poder central e eliminar os senhores da guerra, além de conter o avanço comunista.",
        image: "https://upload.wikimedia.org/wikipedia/commons/6/64/Funeral_of_Sun_Yat-sen_01.jpg",
        imageCaption: "Funeral de Sun Yat-sen, próximo ao Mausoléu Zhongshan",

        sources: [
          {
            name: "Revolução Chinesa (1911-1949): o que foi, suas causas e consequências - Toda Matéria",
            url: "https://www.todamateria.com.br/revolucao-chinesa/"
          },
          {
            name: "Morte e funeral de Estado de Sun Yat-sen – Wikipédia, a enciclopédia livre",
            url: "https://pt.wikipedia.org/wiki/Morte_e_funeral_de_Estado_de_Sun_Yat-sen"
          },
        ]
      }
    };

    var myModalEl = document.getElementById('countryModal')
    myModalEl.addEventListener('hidden.bs.modal', function (event) {
      document.body.style.overflow = 'auto'; // garante rolagem ao fechar
    })


    function openModal(country) {
      const data = countryData[country.toLowerCase()];

      if (!data) {
        console.error("Dados do país não encontrados.");
        return;
      }

      const setTextContent = (id, content, fallback = "Informação Indisponível") => {
        document.getElementById(id).textContent = content || fallback;
      };

      const setImageAttributes = (id, src, alt, fallbackAlt = "Imagem não disponível") => {
        const img = document.getElementById(id);
        img.src = src || "";
        img.alt = alt || fallbackAlt;
      };

      // Título do modal
      setTextContent("modalTitle", data.title);

      // Imagem da bandeira do país
      setImageAttributes("modalImage", data.imageURL, `Bandeira de ${data.title}`);

      // Descrição principal
      setTextContent("modalDescription", data.description, "Sem descrição disponível");

      // Primeira imagem e legenda
      setImageAttributes("image1", data.image, `Imagem de ${data.title}`);
      setTextContent("image1Caption", data.imageCaption, "Legenda indisponível");

      // Fontes de informação
      const sourcesElement = document.getElementById("modalSources");
      if (data.sources && data.sources.length > 0) {
        sourcesElement.innerHTML = "Fontes: " + data.sources
          .map((source, index, arr) =>
            `<a href="${source.url}" target="_blank">${source.name}</a>${index < arr.length - 1 ? (index === arr.length - 2 ? ' e ' : ', ') : ''}`
          ).join('');
      } else {
        sourcesElement.textContent = "Fontes: Nenhuma fonte disponível.";
      }

      // Exibe o modal
      $("#countryModal").modal("show");
    }

    function showTooltip(evt, title, imageURL, description, area, color) {
      let tooltip = document.getElementById("tooltip");
      tooltip.innerHTML = ""; // Limpa o conteúdo anterior do tooltip

      // Criar elementos para o título, imagem e descrição
      let tooltipTitle = document.createElement("div");
      tooltipTitle.textContent = title;
      tooltipTitle.classList.add("tooltip-title"); // Aplica a classe ao título

      let tooltipImg = document.createElement("img");
      tooltipImg.src = imageURL;
      tooltipImg.classList.add("tooltip-image"); // Adiciona a classe para centralizar a imagem

      let tooltipDescription = document.createElement("div");
      tooltipDescription.textContent = description;
      tooltipDescription.classList.add("tooltip-text"); // Aplica a classe ao texto

      // Adiciona os elementos ao tooltip
      tooltip.appendChild(tooltipTitle);
      tooltip.appendChild(tooltipImg);
      tooltip.appendChild(tooltipDescription);

      tooltip.style.display = "block"; // Exibe o tooltip

      // Define a posição do tooltip
      let tooltipWidth = tooltip.offsetWidth;
      let tooltipHeight = tooltip.offsetHeight;

      let left = evt.pageX + 10; // Posição horizontal
      let top = evt.pageY + 10; // Posição vertical

      // Ajusta a posição se o tooltip sair da tela
      if (left + tooltipWidth > window.innerWidth) {
        left = window.innerWidth - tooltipWidth - 10;
      }
      if (top + tooltipHeight > window.innerHeight) {
        top = window.innerHeight - tooltipHeight - 10;
      }

      tooltip.style.left = left + "px";
      tooltip.style.top = top + "px";

      // Alterar cor do elemento ou dos elementos dentro do grupo
      if (area.tagName === "g") {
        changeGroupColor(area, color);
      } else {
        area.style.fill = color;
      }
    }

    function hideTooltip() {
      var tooltip = document.getElementById("tooltip");
      tooltip.style.display = "none"; // Oculta o tooltip
    }

    function originalColor(area) {
      // Restaurar a cor original para grupos e elementos
      if (area.tagName === "g") {
        resetGroupColor(area);
      } else {
        area.style.fill = "#ececec";
      }
    }

    function changeGroupColor(group, color) {
      // Itera sobre todos os filhos do grupo e altera a cor
      const elements = group.querySelectorAll("*");
      elements.forEach((element) => {
        if (element.tagName === "path") {
          element.style.fill = color;
        }
      });
    }

    function resetGroupColor(group) {
      // Itera sobre todos os filhos do grupo e restaura a cor original
      const elements = group.querySelectorAll("*");
      elements.forEach((element) => {
        if (element.tagName === "path") {
          element.style.fill = "#ececec"; // Cor original
        }
      });
    }

    const events = [
      { year: 1912, label: "Proclamação da República da China", url: "pagina_1912.html" },
      { year: 1916, label: "Morte de Yuan Shikai e Era dos Senhores da Guerra", url: "pagina_1916.html" },
      { year: 1921, label: "Fundação do Partido Comunista da China", url: "pagina_1921.html" },
      { year: 1925, label: "Morte de Sun Yat-sen e ascensão de Chiang Kai-shek", url: "pagina_1925.html" },
      { year: 1926, label: "Expedição do Norte", url: "pagina_1926.html" },
      { year: 1931, label: "Invasão Japonesa da Manchúria", url: "pagina_1931.html" },
      { year: 1937, label: "Segunda Guerra Sino-Japonesa", url: "pagina_1937.html" },
      { year: 1945, label: "Fim da Segunda Guerra e retomada da Guerra Civil", url: "pagina_1945.html" },
      { year: 1949, label: "Fundação da República Popular da China", url: "pagina_1949.html" },
    ];


    const minYear = events[0].year;
    const maxYear = events[events.length - 1].year;
    const totalDuration = maxYear - minYear;

    const markersContainer = document.getElementById("markers");
    const slider = document.getElementById("myRange");


    function getProportionalPosition(year) {
      return ((year - minYear) / totalDuration) * 100;
    }


    function createMarkers() {
      markersContainer.innerHTML = "";

      events.forEach((event, index) => {
        const marker = document.createElement("span");
        marker.className = "marker";
        marker.setAttribute("data-year", event.year);

        let position = getProportionalPosition(event.year);


        if (event.year === 1912) position += 0.6;
        if (event.year === 1945) position -= 0.6;
        if (event.year === 1949) position -= 5;

        marker.style.left = `${position}%`;
        marker.style.top = index % 2 === 1 ? "-70px" : "20px";

        marker.innerHTML = `
      <span class="marker-title">${event.year}</span>
      <span class="marker-subtitle">${event.label}</span>
    `;

        markersContainer.appendChild(marker);
      });
    }

    createMarkers();

    // encontra evento mais próximo
    function getClosestEventIndex(value) {
      let closestIndex = 0;
      let closestDifference = Infinity;

      events.forEach((event, index) => {
        const eventPosition = getProportionalPosition(event.year);
        const difference = Math.abs(value - eventPosition);
        if (difference < closestDifference) {
          closestDifference = difference;
          closestIndex = index;
        }
      });

      return closestIndex;
    }

    // movimento do slider (salta para o evento)
    slider.addEventListener("input", function () {
      const value = parseFloat(this.value);
      const index = getClosestEventIndex(value);
      const eventPosition = getProportionalPosition(events[index].year);

      // força o slider a alinhar exatamente com o marcador
      this.value = eventPosition;

      // atualiza o visual do slider
      this.style.background = `
    linear-gradient(
      to right,
      yellow 0%,
      yellow ${eventPosition}%,
      #feae98 ${eventPosition}%,
      #feae98 100%
    )
  `;
    });

    // navegação
    slider.addEventListener("change", function () {
      const index = getClosestEventIndex(parseFloat(this.value));
      window.location.href = events[index].url;
    });

    // ano atual pela URL
    function getCurrentYearFromURL() {
      const match = window.location.href.match(/pagina_(\d+)\.html/);
      return match ? parseInt(match[1], 10) : null;
    }

    // inicializa slider
    function initializeSlider() {
      const currentYear = getCurrentYearFromURL();
      if (currentYear !== null) {
        const position = getProportionalPosition(currentYear);
        slider.value = position;
        slider.style.background = `linear-gradient(
      to right,
      yellow 0%,
      yellow ${position}%,
      #feae98 ${position}%,
      #feae98 100%
    )`;
      }
    }

    window.addEventListener("load", initializeSlider);


  </script>
</body>

</html>